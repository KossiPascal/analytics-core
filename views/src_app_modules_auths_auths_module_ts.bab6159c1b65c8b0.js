"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([["src_app_modules_auths_auths_module_ts"],{3351:(S,h,r)=>{r.r(h),r.d(h,{AuthsModule:()=>O});var u=r(6610),s=r(7222),c=r(1402),t=r(3279),g=r(3671),m=r(4796),w=r(6409),y=r(3696);function k(i,p){if(1&i&&(t.j41(0,"div",31),t.nrm(1,"i",32),t.j41(2,"div",33),t.EFF(3),t.k0s()()),2&i){const e=t.XpG();t.R7$(3),t.JRh(e.LoadingMsg)}}function C(i,p){1&i&&(t.j41(0,"div",34),t.EFF(1," Password does not match "),t.k0s())}let F=(()=>{class i{constructor(e,n,o,a,d){this.store=e,this.auth=n,this.router=o,this.http=a,this.conf=d,this.message="Vous voulez vous enr\xe9gistrer",this.isLoading=!1,this.LoadingMsg="Loading...",this.showRegisterPage=!1,this.passwordType="password"}ngOnInit(){this.getConfigs(),this.showRegisterPage?this.authForm=this.createFormGroup():this.auth.GoToDefaultPage()}showHidePassword(){this.passwordType="password"==this.passwordType?"text":"password"}getConfigs(){}createFormGroup(){return new s.gE({username:new s.MJ("",[s.k0.required,s.k0.minLength(4)]),fullname:new s.MJ("",[s.k0.required,s.k0.minLength(4)]),email:new s.MJ("",[s.k0.required,s.k0.email]),password:new s.MJ("",[s.k0.required,s.k0.minLength(8)]),passwordConfirm:new s.MJ("",[s.k0.required,s.k0.minLength(8)]),agree_terms:new s.MJ(!1,[s.k0.required]),isActive:new s.MJ(this.showRegisterPage)},[this.MatchValidator("password","passwordConfirm"),this.AcceptThermeValidator("agree_terms")])}MatchValidator(e,n){return o=>{const a=o.get(e),d=o.get(n);return a&&d&&a.value!==d.value?{mismatch:!0}:null}}AcceptThermeValidator(e){return n=>{const o=n.get(e);return o&&!0!==o.value?{mismatch:!0}:null}}passwordMatchError(){return this.authForm.getError("password")&&this.authForm.get("passwordConfirm")?.touched}register(){}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(g.w),t.rXU(m.u),t.rXU(c.Ix),t.rXU(w.Qq),t.rXU(y.w))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-register"]],decls:50,vars:6,consts:[[1,"login-page","register-page"],[1,"login-box","register-box"],[1,"card","card-outline","card-primary"],[1,"card-header","text-center"],[1,"card-body"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"login-box-msg"],["novalidate","",1,"form-horizontal",3,"ngSubmit","formGroup"],[1,"input-group","mb-3"],["id","username","type","text","placeholder","Username","formControlName","username",1,"form-control"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],["id","fullname","type","text","placeholder","Full Name","formControlName","fullname",1,"form-control"],["id","email","type","email","placeholder","Email","formControlName","email",1,"form-control"],[1,"fas","fa-envelope"],["id","password","placeholder","Password","formControlName","password",1,"form-control",3,"type"],[1,"input-group-text",3,"click"],[1,"fas","fa-lock"],["id","passwordConfirm","type","password","placeholder","Retype password","formControlName","passwordConfirm",1,"form-control"],["class","btn btn-danger",4,"ngIf"],[1,"row"],[1,"col-7"],[1,"icheck-primary"],["type","checkbox","id","agreeTerms","name","terms","formControlName","agree_terms"],["for","agreeTerms"],["href","#"],[1,"col-md-5"],["color","accent","type","submit",1,"btn","btn-success","btn-block",3,"disabled"],["routerLink","/auths/login",1,"text-center"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],[1,"btn","btn-danger"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.nrm(3,"div",3),t.j41(4,"div",4)(5,"div",5),t.DNE(6,k,4,1,"div",6),t.j41(7,"p",7)(8,"strong"),t.EFF(9),t.k0s()(),t.j41(10,"form",8),t.bIt("ngSubmit",function(){return o.register()}),t.j41(11,"div",9),t.nrm(12,"input",10),t.j41(13,"div",11)(14,"div",12),t.nrm(15,"span",13),t.k0s()()(),t.j41(16,"div",9),t.nrm(17,"input",14),t.j41(18,"div",11)(19,"div",12),t.nrm(20,"span",13),t.k0s()()(),t.j41(21,"div",9),t.nrm(22,"input",15),t.j41(23,"div",11)(24,"div",12),t.nrm(25,"span",16),t.k0s()()(),t.j41(26,"div",9),t.nrm(27,"input",17),t.j41(28,"div",11)(29,"div",18),t.bIt("click",function(){return o.showHidePassword()}),t.nrm(30,"span",19),t.k0s()()(),t.j41(31,"div",9),t.nrm(32,"input",20),t.j41(33,"div",11)(34,"div",12),t.nrm(35,"span",19),t.k0s()()(),t.DNE(36,C,2,0,"div",21),t.j41(37,"div",22)(38,"div",23)(39,"div",24),t.nrm(40,"input",25),t.j41(41,"label",26),t.EFF(42,"J'accepte les "),t.j41(43,"a",27),t.EFF(44,"termes"),t.k0s()()()(),t.j41(45,"div",28)(46,"button",29),t.EFF(47,"register"),t.k0s()()()(),t.j41(48,"a",30),t.EFF(49,"Me connecter"),t.k0s()()()()()()),2&n&&(t.R7$(6),t.Y8G("ngIf",o.isLoading),t.R7$(3),t.JRh(o.message),t.R7$(),t.Y8G("formGroup",o.authForm),t.R7$(17),t.FS9("type",o.passwordType),t.R7$(9),t.Y8G("ngIf",o.passwordMatchError()),t.R7$(10),t.Y8G("disabled",!o.authForm.valid))},dependencies:[u.bT,s.qT,s.me,s.Zm,s.BC,s.cb,s.j4,s.JD,c.Wk],styles:["label[_ngcontent-%COMP%] {\n    display: block;\n  }"]})}return i})();var l=r(7207),f=r(4451),j=r(3366),v=r(8394);let T=(()=>{class i{constructor(e){this.cst=e}downloadAPK(e){const n=document.createElement("a");n.href=this.cst.backenUrl(`publics/download/kendeya-${e?"prod":"dev"}-apk`),n.download=`kendeya-${e?"prod":"dev"}.apk`,n.click()}openGuidePage(){const e=document.createElement("a");e.href=this.cst.backenUrl("publics/kendeya-guide-formation"),e.target="_blank",e.click()}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(v.D))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-public-utils"]],decls:7,vars:0,consts:[[1,"download-button",3,"click"],[2,"color","red"]],template:function(n,o){1&n&&(t.j41(0,"div",0),t.bIt("click",function(){return o.openGuidePage()}),t.EFF(1," Kendeya - Guide de formation\n"),t.k0s(),t.j41(2,"div",0),t.bIt("click",function(){return o.downloadAPK(!0)}),t.EFF(3," T\xe9l\xe9charg\xe9 Kendeya - Production\n"),t.k0s(),t.j41(4,"div",0),t.bIt("click",function(){return o.downloadAPK(!1)}),t.j41(5,"b",1),t.EFF(6,"T\xe9l\xe9charg\xe9 Kendeya de Test"),t.k0s()())},styles:[".download-button[_ngcontent-%COMP%]{padding:2px 3px;background-color:#fff;color:#4caf50;border:none;border-radius:5px;cursor:pointer;font-size:18px;margin-top:10px;width:295px}.download-button[_ngcontent-%COMP%]:hover{background-color:#45a049;color:#fff}"]})}return i})();function E(i,p){if(1&i&&(t.j41(0,"h6",17),t.EFF(1),t.k0s()),2&i){const e=t.XpG();t.R7$(),t.JRh(e.message)}}function x(i,p){1&i&&t.nrm(0,"span",18)}let R=(()=>{class i{constructor(e,n,o,a){this.userCtx=e,this.auth=n,this.api=o,this.store=a,this.isLoading=!1}ngOnInit(){this.loginForm=this.createFormGroup()}createFormGroup(){return new s.gE({credential:new s.MJ("",[s.k0.required,s.k0.minLength(3)]),password:new s.MJ("",[s.k0.required,s.k0.minLength(4)])})}login(){return this.isLoading=!0,this.api.login(this.loginForm.value).subscribe(e=>{200===e.status?(this.store.set({db:l.z,name:"token",value:e.data}),this.store.set({db:l.z,name:"countries",value:JSON.stringify(e.countries)}),this.store.set({db:l.z,name:"regions",value:JSON.stringify(e.regions)}),this.store.set({db:l.z,name:"prefectures",value:JSON.stringify(e.prefectures)}),this.store.set({db:l.z,name:"communes",value:JSON.stringify(e.communes)}),this.store.set({db:l.z,name:"hospitals",value:JSON.stringify(e.hospitals)}),this.store.set({db:l.z,name:"districtQuartiers",value:JSON.stringify(e.districtQuartiers)}),this.store.set({db:l.z,name:"villageSecteurs",value:JSON.stringify(e.villageSecteurs)}),this.store.set({db:l.z,name:"chws",value:JSON.stringify(e.chws)}),this.store.set({db:l.z,name:"recos",value:JSON.stringify(e.recos)}),location.href=this.userCtx.defaultPage):this.message=e.data,this.isLoading=!1},e=>{this.message=e?.message,console.log(e),this.isLoading=!1})}static#t=this.\u0275fac=function(n){return new(n||i)(t.rXU(f.i),t.rXU(m.u),t.rXU(j.G),t.rXU(g.w))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["app-login"]],decls:25,vars:4,consts:[[1,"row","h-100","align-items-center","justify-content-center",2,"height","100%","width","100%","padding-top","100px"],[1,"col-12","col-sm-8","col-md-6","col-lg-5","col-xl-4",2,"max-width","500px"],[1,"bg-white","rounded","p-4","p-sm-5","my-4","mx-3"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],["href","#",1,""],[1,"app-text-style"],[1,"fa","fa-user-edit","me-2"],["height","40px","src","assets/logo/guinee.png","alt",""],["novalidate","",3,"ngSubmit","formGroup"],["style","color: darkred;",4,"ngIf"],[1,"form-floating","mb-3"],["type","text","id","floatingUsername","placeholder","Username","formControlName","credential",1,"form-control",2,"background-color","whitesmoke"],["for","floatingUsername"],["type","password","id","floatingPassword","placeholder","Password","formControlName","password",1,"form-control",2,"background-color","whitesmoke"],["for","floatingPassword"],["type","submit",1,"btn","btn-fifteen","py-2","w-100","mb-4",3,"disabled"],["class","fas fa-1x fa-sync-alt fa-spin",4,"ngIf"],[2,"color","darkred"],[1,"fas","fa-1x","fa-sync-alt","fa-spin"]],template:function(n,o){1&n&&(t.nrm(0,"app-public-utils"),t.j41(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"a",4)(6,"h4",5),t.nrm(7,"i",6),t.EFF(8," Connexion "),t.k0s()(),t.j41(9,"h3",5),t.nrm(10,"img",7),t.k0s()(),t.j41(11,"form",8),t.bIt("ngSubmit",function(){return o.login()}),t.DNE(12,E,2,1,"h6",9),t.j41(13,"div",10),t.nrm(14,"input",11),t.j41(15,"label",12),t.EFF(16,"Nom Utilisateur"),t.k0s()(),t.j41(17,"div",10),t.nrm(18,"input",13),t.j41(19,"label",14),t.EFF(20,"Mot de passe"),t.k0s()(),t.nrm(21,"br"),t.j41(22,"button",15),t.EFF(23,"Se connecter "),t.DNE(24,x,1,0,"span",16),t.k0s()()()()()),2&n&&(t.R7$(11),t.Y8G("formGroup",o.loginForm),t.R7$(),t.Y8G("ngIf",o.message),t.R7$(10),t.Y8G("disabled",!o.loginForm.valid||o.isLoading),t.R7$(2),t.Y8G("ngIf",o.isLoading))},dependencies:[u.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,T],styles:[".custom-login-container[_ngcontent-%COMP%]{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;display:flex!important;justify-content:center!important;align-items:center!important}.custom-login-container[_ngcontent-%COMP%]   .login-box[_ngcontent-%COMP%]{width:400px!important;margin:0 auto!important;padding-top:0!important}"]})}return i})();var P=r(6340),M=r(8503),U=r(3527),G=r(6104),J=r(6098);let b=(()=>{class i{constructor(e,n,o,a,d,I){this.userCtx=e,this.cst=n,this.titleService=o,this.activatedRoute=a,this.router=d,this.auth=I,this.destroy$=new G.B,this.logoutAccessPages=["auths/lock-screen","auths/login","auths/register","auths/forgot-password"]}canActivate(e,n){if(this.userCtx.isLoggedIn)return!1;this.setRouteTitle(e.data?.title||this.cst.defaultTitle);const a=n.url.substring(1);return!!this.logoutAccessPages.includes(a)}setRouteTitle(e){this.titleService.setTitle(e)}subscribeToNavigationEnd(){this.router.events.pipe((0,P.Q)(this.destroy$),(0,M.p)(e=>e instanceof c.wF),(0,U.T)(()=>{const e=this.activatedRoute.firstChild;return e&&e.snapshot.data.title?e.snapshot.data.title:this.cst.defaultTitle})).subscribe(e=>{this.setRouteTitle(e)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(n){return new(n||i)(t.KVO(f.i),t.KVO(v.D),t.KVO(J.hE),t.KVO(c.nX),t.KVO(c.Ix),t.KVO(m.u))};static#e=this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const L=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:R,canActivate:[b],data:{href:"auths/login",title:"User login"}},{path:"auths/register",component:F,canActivate:[b],data:{href:"auths/register",title:"User registration"}}];let N=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.$C({type:i});static#s=this.\u0275inj=t.G2t({imports:[c.iI.forChild(L),c.iI]})}return i})(),O=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.$C({type:i});static#s=this.\u0275inj=t.G2t({imports:[u.MD,s.X1,N]})}return i})()}}]);