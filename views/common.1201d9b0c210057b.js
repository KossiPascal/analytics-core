"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([["common"],{3111:(f,c,s)=>{s.d(c,{d:()=>P});var _=s(1402),h=s(6340),l=s(8503),E=s(3527),O=s(6104),e=s(3279),d=s(6098),v=s(8394),D=s(4451),M=s(4796);let P=(()=>{class r{constructor(t,i,o,a,u,n){this.titleService=t,this.cst=i,this.activatedRoute=o,this.router=a,this.userCtx=u,this.auth=n,this.destroy$=new O.B}canActivate(t,i){const o=this.userCtx.currentUserCtx;if(!this.userCtx.isLoggedIn||!o)return this.auth.logout(),!1;const a=t.data?.href;return[].concat.apply([]),!a||a&&(o.isAdmin||(o.routes??[]).map(n=>n.path).includes(a))?(this.setRouteTitle(t.data?.title||this.cst.defaultTitle),i.url.substring(1),!0):(this.router.navigate(["errors/unauthorized"]),!1)}setRouteTitle(t){this.titleService.setTitle(t)}subscribeToNavigationEnd(){this.router.events.pipe((0,h.Q)(this.destroy$),(0,l.p)(t=>t instanceof _.wF),(0,E.T)(()=>{const t=this.activatedRoute.firstChild;return t&&t.snapshot.data.title?t.snapshot.data.title:this.cst.defaultTitle})).subscribe(t=>{this.setRouteTitle(t)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(i){return new(i||r)(e.KVO(d.hE),e.KVO(v.D),e.KVO(_.nX),e.KVO(_.Ix),e.KVO(D.i),e.KVO(M.u))};static#s=this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})()}}]);