"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([["common"],{3677:(R,T,s)=>{s.d(T,{p:()=>S});var n=s(3308),i=s(6769),E=s(6104),O=s(6340),a=s(7623),_=s(3425),A=s(5455),P=s(8394),c=s(6167),l=s(2365),d=s(3122),I=s(5065);let S=(()=>{class D extends _.K{constructor(t,e,o,g,u,N){super(u,N,g,o),this.mService=t,this.cst=e,this.destroy$=new E.B,this.REPORTS_HEADER={ON_FETCHING:{},IS_VALIDATED:{},IS_ON_DHIS2:{},ON_VALIDATION:{},ON_CANCEL_VALIDATION:{},ON_DHIS2_SENDING:{},ON_DHIS2_SENDING_ERROR:{}},this.REPORTS_FILTER={RECOS_NEEDED:[],RECOS_SELECTED:[],SEND_DHIS2_ORGUNITS:[]},this.SHOW_EXPORT_TABLE_BTN=!0,this.title="Rapport des Donn\xe9es Filtr\xe9es",this.logoUrl="",this.onValidateData=new i.bkB,this.onCancelDataValidated=new i.bkB,this.onSendDataToDhis2=new i.bkB,this.onHideZero=new i.bkB,this.initializeComponent(),this.logoUrl=this.cst.APP_LOGO,this.fGroup.REPORTS_HEADER$.pipe((0,O.Q)(this.destroy$)).subscribe(r=>{r&&Object.entries(this.REPORTS_HEADER).forEach(([h,p])=>{this.REPORTS_HEADER[h]=r[h]??(Array.isArray(p)?[]:{})})}),this.fGroup.REPORTS_FILTER$.pipe((0,O.Q)(this.destroy$)).subscribe(r=>{r&&Object.keys(this.REPORTS_FILTER).forEach(h=>{this.REPORTS_FILTER[h]=r[h]??[]})})}initializeComponent(){var t=this;return(0,n.A)(function*(){t.USER=yield t.userCtx.currentUser()})()}ngOnChanges(t){t.CHANGE_STATE&&(this.stateChange=t.CHANGE_STATE.currentValue)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}hideZero(t){var e=this;return(0,n.A)(function*(){t.preventDefault(),e.onHideZero&&e.onHideZero.emit(e.HIDE_ZERO_ID)})()}validateData(t){var e=this;return(0,n.A)(function*(){t.preventDefault(),e.onValidateData&&e.onValidateData.emit()})()}cancelValidation(t){var e=this;return(0,n.A)(function*(){t.preventDefault(),e.onCancelDataValidated&&e.onCancelDataValidated.emit()})()}sendDataToDhis2(t){var e=this;return(0,n.A)(function*(){e.onSendDataToDhis2&&t&&e.onSendDataToDhis2.emit(t)})()}openSendDataToDhis2Modal(){const e=this.REPORTS_FILTER.RECOS_SELECTED??0;e.length>0&&(this.REPORTS_FILTER.RECOS_NEEDED??0).length!=e.length?this.snackbar.show({msg:"Pour envoyer les donn\xe9es au DHIS2, il faut selectionner tous RECO",color:"warning",position:"TOP"}):this.ORG_UNIT&&this.mService.open(a.$,{data:{REPPORT_NAME:this.REPPORT_NAME}}).subscribe(o=>{o&&o.submited&&(o.dhis2Form?this.sendDataToDhis2(o.dhis2Form):this.snackbar.show({msg:"DHIS2_ORGUNIT est vide, impossible d'envoyer les donn\xe9es",color:"warning",position:"TOP"}))})}SET_REPORTS_HEADER(){this.fGroup.SET_REPORTS_HEADER(this.REPORTS_HEADER),this.CHANGE_STATE=new Date}get ORG_UNIT(){return this.REPORTS_FILTER.SEND_DHIS2_ORGUNITS}get IS_ON_DHIS2(){const t=this.REPORTS_HEADER?.IS_ON_DHIS2;return t&&1==t[this.REPPORT_NAME]}get IS_VALIDATED(){const t=this.REPORTS_HEADER?.IS_VALIDATED;return t&&1==t[this.REPPORT_NAME]}get ON_DHIS2_SENDING(){const t=this.REPORTS_HEADER?.ON_DHIS2_SENDING;return t&&1==t[this.REPPORT_NAME]}get ON_VALIDATION(){const t=this.REPORTS_HEADER?.ON_VALIDATION;return t&&1==t[this.REPPORT_NAME]}get ON_CANCEL_VALIDATION(){const t=this.REPORTS_HEADER?.ON_CANCEL_VALIDATION;return t&&1==t[this.REPPORT_NAME]}static{this.\u0275fac=function(e){return new(e||D)(i.rXU(A.B),i.rXU(P.D),i.rXU(c.i),i.rXU(l.z),i.rXU(d.z),i.rXU(I.T))}}static{this.\u0275cmp=i.VBU({type:D,selectors:[["base-header-selector"]],inputs:{CHANGE_STATE:"CHANGE_STATE",REPPORT_NAME:"REPPORT_NAME",HIDE_ZERO_ID:"HIDE_ZERO_ID",TABLE_ID:"TABLE_ID",SHOW_EXPORT_TABLE_BTN:"SHOW_EXPORT_TABLE_BTN"},outputs:{onValidateData:"onValidateData",onCancelDataValidated:"onCancelDataValidated",onSendDataToDhis2:"onSendDataToDhis2",onHideZero:"onHideZero"},standalone:!1,features:[i.Vt3,i.OA$],decls:0,vars:0,template:function(e,o){},encapsulation:2,changeDetection:0})}}return D})()},7929:(R,T,s)=>{s.d(T,{K:()=>i});var n=s(6769);let i=(()=>{class E{constructor(){this.onPageChanged=new n.bkB,this.currentPage=1,this.paginatedData=[]}ngOnInit(){this.initialPageSize=this.initialPageSize??50,this.pageSize=this.initialPageSize,this.pageSizeOptions=this.pageSizeOptions??[50,100,200,300,400,500,1e3,"ALL"],this.PAGINATION_DATA=this.PAGINATION_DATA??[]}ngOnChanges(a){a.PAGINATION_DATA&&(this.currentPage=1,setTimeout(()=>{this.updatePagination()}))}get datalength(){return this.PAGINATION_DATA.length}get totalPages(){return Math.ceil(this.PAGINATION_DATA.length/this.pageSize)}updatePagination(){const a=(this.currentPage-1)*this.pageSize;this.paginatedData=this.PAGINATION_DATA.slice(a,a+this.pageSize),this.onPageChanged.emit(this.paginatedData)}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.updatePagination())}prevPage(){this.currentPage>1&&(this.currentPage--,this.updatePagination())}changePageSize(a){const _=a.target.value;this.pageSize="ALL"===_?this.datalength:+_,this.currentPage=1,this.updatePagination()}static{this.\u0275fac=function(_){return new(_||E)}}static{this.\u0275cmp=n.VBU({type:E,selectors:[["base-paginate-table"]],inputs:{PAGINATION_DATA:"PAGINATION_DATA",pageSizeOptions:"pageSizeOptions",initialPageSize:"initialPageSize"},outputs:{onPageChanged:"onPageChanged"},standalone:!1,features:[n.OA$],decls:0,vars:0,template:function(_,A){},encapsulation:2,changeDetection:0})}}return E})()}}]);