import{a as Lt}from"./chunk-F5PNBA7E.js";import{b as Ft}from"./chunk-WBK6YZ2R.js";import{a as I}from"./chunk-44HVY5PJ.js";import{a as Ut}from"./chunk-52TJXHHN.js";import{a as Vt}from"./chunk-D34N3ZSO.js";import{a as Tt,b as st,i as H}from"./chunk-TMLCBAWV.js";import{Bb as yt,Ca as C,Ea as u,Ga as gt,Gb as lt,Ha as L,Hb as K,Ib as y,Jb as j,Ka as o,Kb as Q,La as r,Lb as V,Ma as _,Mb as S,Na as it,Nb as Y,Oa as nt,Ob as z,Pa as E,Pb as q,Qb as dt,Ra as f,Rb as ct,S as ot,Sb as St,Ta as h,Tb as pt,Ub as Et,Vb as kt,Wa as B,Wb as Rt,Xa as T,Y as F,Z as rt,_b as Z,ab as l,ac as ft,bb as b,cb as R,da as v,dc as Ot,ea as x,ec as Pt,f as P,fc as Mt,gb as M,gc as mt,oa as et,qa as d,ra as k,tb as at,ub as G,vb as U,xb as wt}from"./chunk-GHHBFCRH.js";var Ht=a=>({"custom-class":a}),J=a=>({show:a});function Xt(a,s){if(a&1){let n=E();o(0,"span",40),f("click",function(){v(n);let e=h(2).$implicit,i=h();return x(i.EditUser(e))}),_(1,"i",41),r()}}function Kt(a,s){if(a&1){let n=E();o(0,"span",42),f("click",function(){v(n);let e=h(2).$implicit,i=h();return x(i.SelectUser(e))}),_(1,"i",43),r()}}function Zt(a,s){a&1&&(o(0,"span",44),_(1,"i",45),r())}function $t(a,s){if(a&1){let n=E();o(0,"tr")(1,"td",33),l(2),r(),o(3,"td"),l(4),r(),o(5,"td"),l(6),r(),o(7,"td"),l(8),r(),o(9,"td")(10,"i",34),f("click",function(){v(n);let e=h().$implicit,i=h();return x(i.ShowRoles(e))}),_(11,"i",35),r()(),_(12,"td"),o(13,"td")(14,"span",36),l(15),r()(),o(16,"td")(17,"span",36),l(18),r()(),o(19,"td"),C(20,Xt,2,0,"span",37),r(),o(21,"td"),C(22,Kt,2,0,"span",38),r(),o(23,"td"),C(24,Zt,2,0,"span",39),r()()}if(a&2){let n=h(),t=n.$implicit,e=n.index,i=h();gt(t.isDeleted==!0?"deleted-user":"undeleted-user"),d(2),b(e+1),d(2),b(t.username),d(2),b(t.fullname),d(2),b(t.email),d(7),b(t.isActive?"":"\u2713"),d(3),b(i.isAdmin(t)?"\u2713":""),d(2),u("ngIf",!i.isAdmin(t)||(i.currentUser==null?null:i.currentUser.isAdmin)),d(2),u("ngIf",!i.isAdmin(t)),d(2),u("ngIf",i.isAdmin(t))}}function Jt(a,s){if(a&1&&(o(0,"tbody"),C(1,$t,25,11,"tr",32),r()),a&2){let n=s.$implicit,t=h();d(),u("ngIf",!t.isAdmin(n)||(t.currentUser==null?null:t.currentUser.isAdmin))}}function te(a,s){if(a&1&&(o(0,"p",28)(1,"strong"),l(2),r()()),a&2){let n=h(2);d(2),b(n.message)}}function ee(a,s){a&1&&(o(0,"div",87),l(1," Password does not match "),r())}function ie(a,s){if(a&1){let n=E();it(0),o(1,"div",88)(2,"p")(3,"input",89),f("change",function(){let e=v(n).$implicit,i=h(2);return x(i.AddOrRemoveRole(e.id))}),r(),o(4,"label",90),l(5),r()()(),nt()}if(a&2){let n=s.$implicit,t=s.index,e=h(2);d(),u("ngClass",M(7,Ht,t<=e.roles$.length/2)),d(2),T("id","add-remove-roles-",n.id,""),u("checked",e.containsRole(n.id)),d(),T("for","add-remove-roles-",n.id,""),d(),b(n.name)}}function ne(a,s){if(a&1){let n=E();o(0,"div",97)(1,"aside",92)(2,"input",94),f("change",function(){let e=v(n).$implicit,i=h(8);return x(i.selectVillageSecteurs(e))}),r(),o(3,"label",95),l(4),r()()()}if(a&2){let n=s.$implicit,t=h().$implicit,e=h(7);u("ngClass",M(7,J,e.isListOpenToShow("district-"+t.id))),d(2),T("id","village_secteur-",n.id,""),u("checked",e.containsOrgUnits("villageSecteurs",n.id)),d(),T("for","village_secteur-",n.id,""),d(),b(n.name)}}function se(a,s){if(a&1){let n=E();o(0,"div",97)(1,"aside",92)(2,"button",93),f("click",function(){let e=v(n).$implicit,i=h(7);return x(i.toggleList("district-"+e.id))}),o(3,"span",17),l(4),r()(),o(5,"input",94),f("change",function(){let e=v(n).$implicit,i=h(7);return x(i.selectDistrictQuartiers(e))}),r(),o(6,"label",95),l(7),r()(),C(8,ne,5,9,"div",96),r()}if(a&2){let n=s.$implicit,t=h().$implicit,e=h(6);u("ngClass",M(9,J,e.isListOpenToShow("hospital-"+t.id))),d(4),b(e.isListOpenToShow("district-"+n.id)?"-":"+"),d(),T("id","district-",n.id,""),u("checked",e.containsOrgUnits("districtQuartiers",n.id)),d(),T("for","district-",n.id,""),d(),b(n.name),d(),u("ngForOf",e.generateVillageSecteurs(n.id))}}function oe(a,s){if(a&1){let n=E();o(0,"div",97)(1,"aside",92)(2,"button",93),f("click",function(){let e=v(n).$implicit,i=h(6);return x(i.toggleList("hospital-"+e.id))}),o(3,"span",17),l(4),r()(),o(5,"input",94),f("change",function(){let e=v(n).$implicit,i=h(6);return x(i.selectHospitals(e))}),r(),o(6,"label",95),l(7),r()(),C(8,se,9,11,"div",96),r()}if(a&2){let n=s.$implicit,t=h().$implicit,e=h(5);u("ngClass",M(9,J,e.isListOpenToShow("commune-"+t.id))),d(4),b(e.isListOpenToShow("hospital-"+n.id)?"-":"+"),d(),T("id","hospital-",n.id,""),u("checked",e.containsOrgUnits("hospitals",n.id)),d(),T("for","hospital-",n.id,""),d(),b(n.name),d(),u("ngForOf",e.generateDistrictQuartiers(n.id))}}function re(a,s){if(a&1){let n=E();o(0,"div",97)(1,"aside",92)(2,"button",93),f("click",function(){let e=v(n).$implicit,i=h(5);return x(i.toggleList("commune-"+e.id))}),o(3,"span",17),l(4),r()(),o(5,"input",94),f("change",function(){let e=v(n).$implicit,i=h(5);return x(i.selectCommunes(e))}),r(),o(6,"label",95),l(7),r()(),C(8,oe,9,11,"div",96),r()}if(a&2){let n=s.$implicit,t=h().$implicit,e=h(4);u("ngClass",M(9,J,e.isListOpenToShow("prefecture-"+t.id))),d(4),b(e.isListOpenToShow("commune-"+n.id)?"-":"+"),d(),T("id","commune-",n.id,""),u("checked",e.containsOrgUnits("communes",n.id)),d(),T("for","commune-",n.id,""),d(),b(n.name),d(),u("ngForOf",e.generateHospitals(n.id))}}function ae(a,s){if(a&1){let n=E();o(0,"div",97)(1,"aside",92)(2,"button",93),f("click",function(){let e=v(n).$implicit,i=h(4);return x(i.toggleList("prefecture-"+e.id))}),o(3,"span",17),l(4),r()(),o(5,"input",94),f("change",function(){let e=v(n).$implicit,i=h(4);return x(i.selectPrefectures(e))}),r(),o(6,"label",95),l(7),r()(),C(8,re,9,11,"div",96),r()}if(a&2){let n=s.$implicit,t=h().$implicit,e=h(3);u("ngClass",M(9,J,e.isListOpenToShow("region-"+t.id))),d(4),b(e.isListOpenToShow("prefecture-"+n.id)?"-":"+"),d(),T("id","prefecture-",n.id,""),u("checked",e.containsOrgUnits("prefectures",n.id)),d(),T("for","prefecture-",n.id,""),d(),b(n.name),d(),u("ngForOf",e.generateCommunes(n.id))}}function le(a,s){if(a&1){let n=E();o(0,"div",97)(1,"aside",92)(2,"button",93),f("click",function(){let e=v(n).$implicit,i=h(3);return x(i.toggleList("region-"+e.id))}),o(3,"span",17),l(4),r()(),o(5,"input",94),f("change",function(){let e=v(n).$implicit,i=h(3);return x(i.selectRegions(e))}),r(),o(6,"label",95),l(7),r()(),C(8,ae,9,11,"div",96),r()}if(a&2){let n=s.$implicit,t=h().$implicit,e=h(2);u("ngClass",M(9,J,e.isListOpenToShow("country-"+t.id))),d(4),b(e.isListOpenToShow("region-"+n.id)?"-":"+"),d(),T("id","region-",n.id,""),u("checked",e.containsOrgUnits("regions",n.id)),d(),T("for","region-",n.id,""),d(),b(n.name),d(),u("ngForOf",e.generatePrefectures(n.id))}}function de(a,s){if(a&1){let n=E();o(0,"div",91)(1,"aside",92)(2,"button",93),f("click",function(){let e=v(n).$implicit,i=h(2);return x(i.toggleList("country-"+e.id))}),o(3,"span",17),l(4),r()(),o(5,"input",94),f("change",function(){let e=v(n).$implicit,i=h(2);return x(i.selectCountries(e))}),r(),o(6,"label",95),l(7),r()(),C(8,le,9,11,"div",96),r()}if(a&2){let n=s.$implicit,t=h(2);d(4),b(t.isListOpenToShow("country-"+n.id)?"-":"+"),d(),u("checked",t.containsOrgUnits("countries",n.id))("id","country-"+n.id),d(),T("for","country-",n.id,""),d(),b(n.name),d(),u("ngForOf",t.generateRegions(n.id))}}function ce(a,s){if(a&1){let n=E();o(0,"div",46)(1,"form",47),f("ngSubmit",function(){v(n);let e=h();return x(e.isEditMode?e.update():e.register())}),o(2,"div",13)(3,"div",14),_(4,"img",15),o(5,"strong",48)(6,"span"),l(7),r()(),o(8,"button",49),f("click",function(){v(n);let e=h();return x(e.closeAddOrUpdateModalVisible())}),o(9,"span",17),l(10,"\xD7"),r()()(),o(11,"div",18),C(12,te,3,1,"p",50),o(13,"div",51)(14,"div",52)(15,"div",53)(16,"h2",54)(17,"button",55),l(18," Identifiants "),r()(),o(19,"div",56)(20,"div",57)(21,"div",19)(22,"div",58)(23,"div",59)(24,"span",60),_(25,"span",61),r(),_(26,"input",62),r(),o(27,"div",59)(28,"span",60),_(29,"span",61),r(),_(30,"input",63),r(),o(31,"div",59)(32,"span",60),_(33,"span",64),r(),_(34,"input",65),r()(),o(35,"div",58)(36,"div",59)(37,"span",60),_(38,"span",66),r(),_(39,"input",67),r(),o(40,"div",59)(41,"div",68),_(42,"input",69),o(43,"label",70),l(44," Activer "),r()()(),o(45,"div",59)(46,"span",60),_(47,"span",64),r(),_(48,"input",71),r(),C(49,ee,2,0,"div",72),r()()()()(),o(50,"div",53)(51,"h2",73)(52,"button",74),l(53," R\xF4les "),r()(),o(54,"div",75)(55,"div",57)(56,"div",76)(57,"input",77),f("click",function(){v(n);let e=h();return x(e.SelectRoles())}),r(),o(58,"label",78),l(59," Select All R\xF4les "),r()(),o(60,"div",79)(61,"div",19),C(62,ie,6,9,"ng-container",9),r()()()()(),o(63,"div",53)(64,"h2",80)(65,"button",81),l(66," Unit\xE9s d'organisations "),r()(),o(67,"div",82)(68,"div",57)(69,"div",83),C(70,de,9,7,"div",84),r()()()()()(),_(71,"br"),r(),o(72,"div",29)(73,"button",85),f("click",function(){v(n);let e=h();return x(e.closeAddOrUpdateModalVisible())}),l(74,"Close"),r(),o(75,"button",86),l(76),r()()()()()}if(a&2){let n=h();d(),u("formGroup",n.isEditMode?n.updateForm:n.registerForm),d(3),B("src",n.APP_LOGO,et),d(2),L(" btn-",n.isEditMode?"warning":"success",""),d(),b(n.isEditMode?"Modifier un utilisateur":"Ajouter un utilisateur"),d(5),u("ngIf",n.message!=""),d(37),u("ngIf",n.passwordMatchError(n.isEditMode?n.updateForm:n.registerForm)),d(8),u("checked",n.selectedRole.length==n.roles$.length),d(5),u("ngForOf",n.roles$),d(8),u("ngForOf",n.countriesList),d(5),L("btn btn-",n.isEditMode?"warning":"success",""),u("disabled",(n.isEditMode?!n.updateForm.valid:!n.registerForm.valid)||n.OrgUnitsIsEmpty()||n.RolesIsEmpty()),d(),b(n.isEditMode?"Modifier":"Sauvegarder")}}function pe(a,s){if(a&1&&(o(0,"p"),_(1,"input",98),o(2,"span",21),l(3),r()()),a&2){let n=s.$implicit,t=h();d(),u("checked",t.containsRole(n.id))("disabled",!0),d(),gt(t.containsRole(n.id)?"action-checked":"action-unchecked"),d(),R(" ",n.name," ")}}var It=(()=>{let s=class s{OrgUnitsIsEmpty(){return[...this.countries??[],...this.regions??[],...this.prefectures??[],...this.communes??[],...this.hospitals??[],...this.districtQuartiers??[],...this.villageSecteurs??[]].length===0}RolesIsEmpty(){return(this.selectedRole??[]).length===0}isListOpenToShow(t){return this.isToOpenList[t]??!1}toggleList(t){let e=this.isToOpenList[t];this.isToOpenList[t]=e!==!0}constructor(t,e,i,c,m){this.userCtx=t,this.api=e,this.snackbar=i,this.store=c,this.cst=m,this.users$=[],this.roles$=[],this.isEditMode=!1,this.addOrUpdateModalVisible=!1,this.selectedRole=[],this.message="",this.APP_LOGO="",this.countriesList=[],this.regionsList=[],this.prefecturesList=[],this.communesList=[],this.hospitalsList=[],this.districtQuartiersList=[],this.villageSecteursList=[],this.chwsList=[],this.recosList=[],this.countries=[],this.regions=[],this.prefectures=[],this.communes=[],this.hospitals=[],this.districtQuartiers=[],this.villageSecteurs=[],this.isToOpenList={},this.APP_LOGO=this.cst.APP_LOGO,this.currentUser=this.userCtx.currentUserCtx}ngOnInit(){this.GetUsers(),this.GetRoles(),this.GetCountries(),this.GetRegions(),this.GetPrefectures(),this.GetCommunes(),this.GetHospitals(),this.GetDistrictQuartiers(),this.GetVillageSecteurs(),this.GetChws(),this.GetRecos(),this.registerForm=this.registerFormGroup(),this.updateForm=this.updateFormGroup(this.selectedUser),this.updatePasswordForm=this.updatePasswordFormGroup(this.selectedUser)}isAdmin(t){return t.isAdmin===!0}GetRoles(){this.api.GetRoles().subscribe(t=>{t.status==200&&(this.roles$=t.data)},t=>{})}GetUsers(){this.api.getUsers().subscribe(t=>{t.status===200&&(this.users$=t.data)},t=>{console.log(t)})}GetCountries(){this.api.GetCountries().subscribe(t=>{t.status===200&&(this.countriesList=t.data)},t=>{console.log(t)})}GetRegions(){this.api.GetRegions().subscribe(t=>{t.status===200&&(this.regionsList=t.data)},t=>{console.log(t)})}GetPrefectures(){this.api.GetPrefectures().subscribe(t=>{t.status===200&&(this.prefecturesList=t.data)},t=>{console.log(t)})}GetCommunes(){this.api.GetCommunes().subscribe(t=>{t.status===200&&(this.communesList=t.data)},t=>{console.log(t)})}GetHospitals(){this.api.GetHospitals().subscribe(t=>{t.status===200&&(this.hospitalsList=t.data)},t=>{console.log(t)})}GetDistrictQuartiers(){this.api.GetDistrictQuartiers().subscribe(t=>{t.status===200&&(this.districtQuartiersList=t.data)},t=>{console.log(t)})}GetVillageSecteurs(){this.api.GetVillageSecteurs().subscribe(t=>{t.status===200&&(this.villageSecteursList=t.data)},t=>{console.log(t)})}GetFamilys(){this.api.GetFamilys().subscribe(t=>{t.status},t=>{console.log(t)})}GetChws(){this.api.GetChws().subscribe(t=>{t.status===200&&(this.chwsList=t.data)},t=>{console.log(t)})}GetRecos(){this.api.GetRecos().subscribe(t=>{t.status===200&&(this.recosList=t.data)},t=>{console.log(t)})}GetPatients(){this.api.GetPatients().subscribe(t=>{t.status},t=>{console.log(t)})}containsOrgUnits(t,e){if(t==="countries"){let i=(this.countries??[]).map(p=>p.id).includes(e),c=(this.regions??[]).map(p=>p.country_id),m=c.includes(e),g=this.generateRegions(e).length===c.length;return i||m&&g}if(t==="regions"){let i=(this.regions??[]).map(p=>p.id).includes(e),c=(this.prefectures??[]).map(p=>p.region_id),m=c.includes(e),g=this.generatePrefectures(e).length===c.length;return i||m&&g}if(t==="prefectures"){let i=(this.prefectures??[]).map(p=>p.id).includes(e),c=(this.communes??[]).map(p=>p.prefecture_id),m=c.includes(e),g=this.generateCommunes(e).length===c.length;return i||m&&g}if(t==="communes"){let i=(this.communes??[]).map(p=>p.id).includes(e),c=(this.hospitals??[]).map(p=>p.commune_id),m=c.includes(e),g=this.generateHospitals(e).length===c.length;return i||m&&g}if(t==="hospitals"){let i=(this.hospitals??[]).map(p=>p.id).includes(e),c=(this.districtQuartiers??[]).map(p=>p.hospital_id),m=c.includes(e),g=this.generateDistrictQuartiers(e).length===c.length;return i||m&&g}if(t==="districtQuartiers"){let i=(this.districtQuartiers??[]).map(p=>p.id).includes(e),c=(this.villageSecteurs??[]).map(p=>p.district_quartier_id),m=c.includes(e),g=this.generateVillageSecteurs(e).length===c.length;return i||m&&g}return t==="villageSecteurs"?(this.villageSecteurs??[]).map(c=>c.id).includes(e):!1}generateRegions(t){return this.regionsList.filter(e=>t===e.country_id)}generatePrefectures(t){return this.prefecturesList.filter(e=>t===e.region_id)}generateCommunes(t){return this.communesList.filter(e=>t===e.prefecture_id)}generateHospitals(t){return this.hospitalsList.filter(e=>t===e.commune_id)}generateDistrictQuartiers(t){return this.districtQuartiersList.filter(e=>t===e.hospital_id)}generateVillageSecteurs(t){return this.villageSecteursList.filter(e=>t===e.district_quartier_id)}closeAddOrUpdateModalVisible(){this.addOrUpdateModalVisible=!1}openAddOrUpdateModalVisible(){this.addOrUpdateModalVisible=!0}selectCountries(t){let e=this.findObj(this.countries,t).index;e!==-1?(this.countries.splice(e,1),this.regions=this.regions.filter(i=>i.country_id!==t.id),this.prefectures=this.prefectures.filter(i=>i.country_id!==t.id),this.communes=this.communes.filter(i=>i.country_id!==t.id),this.hospitals=this.hospitals.filter(i=>i.country_id!==t.id),this.districtQuartiers=this.districtQuartiers.filter(i=>i.country_id!==t.id),this.villageSecteurs=this.villageSecteurs.filter(i=>i.country_id!==t.id)):(this.countries.push(t),this.regions=[...this.regions.filter(i=>i.country_id!==t.id),...this.regionsList.filter(i=>i.country_id===t.id)],this.prefectures=[...this.prefectures.filter(i=>i.country_id!==t.id),...this.prefecturesList.filter(i=>i.country_id===t.id)],this.communes=[...this.communes.filter(i=>i.country_id!==t.id),...this.communesList.filter(i=>i.country_id===t.id)],this.hospitals=[...this.hospitals.filter(i=>i.country_id!==t.id),...this.hospitalsList.filter(i=>i.country_id===t.id)],this.districtQuartiers=[...this.districtQuartiers.filter(i=>i.country_id!==t.id),...this.districtQuartiersList.filter(i=>i.country_id===t.id)],this.villageSecteurs=[...this.villageSecteurs.filter(i=>i.country_id!==t.id),...this.villageSecteursList.filter(i=>i.country_id===t.id)])}selectRegions(t){let e=this.findObj(this.regions,t).index;e!==-1?(this.regions.splice(e,1),this.prefectures=this.prefectures.filter(i=>i.region_id!==t.id),this.communes=this.communes.filter(i=>i.region_id!==t.id),this.hospitals=this.hospitals.filter(i=>i.region_id!==t.id),this.districtQuartiers=this.districtQuartiers.filter(i=>i.region_id!==t.id),this.villageSecteurs=this.villageSecteurs.filter(i=>i.region_id!==t.id)):(this.regions.push(t),this.prefectures=[...this.prefectures.filter(i=>i.region_id!==t.id),...this.prefecturesList.filter(i=>i.region_id===t.id)],this.communes=[...this.communes.filter(i=>i.region_id!==t.id),...this.communesList.filter(i=>i.region_id===t.id)],this.hospitals=[...this.hospitals.filter(i=>i.region_id!==t.id),...this.hospitalsList.filter(i=>i.region_id===t.id)],this.districtQuartiers=[...this.districtQuartiers.filter(i=>i.region_id!==t.id),...this.districtQuartiersList.filter(i=>i.region_id===t.id)],this.villageSecteurs=[...this.villageSecteurs.filter(i=>i.region_id!==t.id),...this.villageSecteursList.filter(i=>i.country_id===t.id)])}selectPrefectures(t){let e=this.findObj(this.prefectures,t).index;e!==-1?(this.prefectures.splice(e,1),this.communes=this.communes.filter(i=>i.prefecture_id!==t.id),this.hospitals=this.hospitals.filter(i=>i.prefecture_id!==t.id),this.districtQuartiers=this.districtQuartiers.filter(i=>i.prefecture_id!==t.id),this.villageSecteurs=this.villageSecteurs.filter(i=>i.prefecture_id!==t.id)):(this.prefectures.push(t),this.communes=[...this.communes.filter(i=>i.prefecture_id!==t.id),...this.communesList.filter(i=>i.prefecture_id===t.id)],this.hospitals=[...this.hospitals.filter(i=>i.prefecture_id!==t.id),...this.hospitalsList.filter(i=>i.prefecture_id===t.id)],this.districtQuartiers=[...this.districtQuartiers.filter(i=>i.prefecture_id!==t.id),...this.districtQuartiersList.filter(i=>i.prefecture_id===t.id)],this.villageSecteurs=[...this.villageSecteurs.filter(i=>i.prefecture_id!==t.id),...this.villageSecteursList.filter(i=>i.prefecture_id===t.id)])}selectCommunes(t){let e=this.findObj(this.communes,t).index;e!==-1?(this.communes.splice(e,1),this.hospitals=this.hospitals.filter(i=>i.commune_id!==t.id),this.districtQuartiers=this.districtQuartiers.filter(i=>i.commune_id!==t.id),this.villageSecteurs=this.villageSecteurs.filter(i=>i.commune_id!==t.id)):(this.communes.push(t),this.hospitals=[...this.hospitals.filter(i=>i.commune_id!==t.id),...this.hospitalsList.filter(i=>i.commune_id===t.id)],this.districtQuartiers=[...this.districtQuartiers.filter(i=>i.commune_id!==t.id),...this.districtQuartiersList.filter(i=>i.commune_id===t.id)],this.villageSecteurs=[...this.villageSecteurs.filter(i=>i.commune_id!==t.id),...this.villageSecteursList.filter(i=>i.commune_id===t.id)])}selectHospitals(t){let e=this.findObj(this.hospitals,t).index;e!==-1?(this.hospitals.splice(e,1),this.districtQuartiers=this.districtQuartiers.filter(i=>i.hospital_id!==t.id),this.villageSecteurs=this.villageSecteurs.filter(i=>i.hospital_id!==t.id)):(this.hospitals.push(t),this.districtQuartiers=[...this.districtQuartiers.filter(i=>i.hospital_id!==t.id),...this.districtQuartiersList.filter(i=>i.hospital_id===t.id)],this.villageSecteurs=[...this.villageSecteurs.filter(i=>i.hospital_id!==t.id),...this.villageSecteursList.filter(i=>i.hospital_id===t.id)])}selectDistrictQuartiers(t){let e=this.findObj(this.districtQuartiers,t).index;e!==-1?(this.districtQuartiers.splice(e,1),this.villageSecteurs=this.villageSecteurs.filter(i=>i.district_quartier_id!==t.id)):(this.districtQuartiers.push(t),this.villageSecteurs=[...this.villageSecteurs.filter(i=>i.district_quartier_id!==t.id),...this.villageSecteursList.filter(i=>i.district_quartier_id===t.id)])}selectVillageSecteurs(t){let e=this.findObj(this.villageSecteurs,t).index;e!==-1?this.villageSecteurs.splice(e,1):this.villageSecteurs.push(t)}findObj(t,e){let[i,c]=(()=>{let m=-1;return[t.find((p,A)=>p.id===e.id?(m=A,!0):!1),m]})();return{found:i,index:c}}EditUser(t){this.updateForm=this.updateFormGroup(t),this.selectedRole=t.roleIds,this.selectedUser=t,this.countries=t.countries,this.regions=t.regions,this.prefectures=t.prefectures,this.communes=t.communes,this.hospitals=t.hospitals,this.districtQuartiers=t.districtQuartiers,this.villageSecteurs=t.villageSecteurs,this.isEditMode=!0,this.openAddOrUpdateModalVisible()}EditPassword(t){this.updateForm=this.updatePasswordFormGroup(t),this.selectedUser=t}SelectUser(t){this.selectedUser=t}CreateUser(){this.registerForm=this.registerFormGroup(),this.selectedRole=[],this.selectedUser=null,this.countries=[],this.regions=[],this.prefectures=[],this.communes=[],this.hospitals=[],this.districtQuartiers=[],this.villageSecteurs=[],this.isEditMode=!1,this.openAddOrUpdateModalVisible()}registerFormGroup(){let t={username:new S("",[y.required,y.minLength(4)]),fullname:new S(""),email:new S(""),password:new S("",[y.required,y.minLength(8)]),passwordConfirm:new S("",[y.required,y.minLength(8)]),isActive:new S(!1)},e=[this.MatchValidator("password","passwordConfirm",!1)];return new V(t,e)}updateFormGroup(t){let e={username:new S(t?.username??"",[y.required,y.minLength(4)]),fullname:new S(t?.fullname??""),email:new S(t?.email??""),password:new S("",[y.minLength(8)]),passwordConfirm:new S("",[y.minLength(8)]),isActive:new S(t?.isActive==!0)};return e.username.disable(),new V(e)}updatePasswordFormGroup(t){let e={username:new S(t?.username??"",[y.required,y.minLength(4)]),password:new S("",[y.required,y.minLength(8)]),passwordConfirm:new S("",[y.required,y.minLength(8)])},i=[this.MatchValidator("password","passwordConfirm",!0)];return e.username.disable(),new V(e,i)}passwordMatchError(t){return t?t.getError("password")&&t.get("passwordConfirm")?.touched:!0}MatchValidator(t,e,i){return c=>{let m=c.get(t),g=c.get(e);if(m&&g){if(m.value!==g.value)return{mismatch:!0};if(i&&(st(m.value)&&m.value.length<8||st(g.value)&&g.value.length<8))return{mismatch:!0}}return null}}ToStringNewLine(t){return`${t}`.toString().replace(/,/g,"<br>")}ShowRoles(t){this.selectedRole=this.rolesIds(t)}rolesIds(t){return t.roles.filter(e=>st(e?.id)).map(e=>`${e.id}`)}register(){let t="",e=this.registerForm.value.password,i=this.registerForm.value.passwordConfirm;if(!((e??"")!=""&&(i??"")!=""&&e==i)){t="Password Error, is required",this.snackbar.show(t,{backgroundColor:"danger",duration:5e3}),this.message=t;return}if(this.OrgUnitsIsEmpty()||this.RolesIsEmpty()){t="OrgUnits or Roles are Empty, they are required",this.snackbar.show(t,{backgroundColor:"danger",duration:5e3}),this.message=t;return}let c={username:this.registerForm.value.username,fullname:this.registerForm.value.fullname,email:this.registerForm.value.email,password:e,isActive:this.registerForm.value.isActive===!0,roles:this.selectedRole,countries:this.countries,regions:this.regions,prefectures:this.prefectures,communes:this.communes,hospitals:this.hospitals,districtQuartiers:this.districtQuartiers,villageSecteurs:this.villageSecteurs,chws:this.chwsList.filter(m=>this.districtQuartiers.map(g=>g.id).includes(m.district_quartier_id)),recos:this.recosList.filter(m=>this.villageSecteurs.map(g=>g.id).includes(m.village_secteur_id))};this.api.register(c).subscribe(m=>{if(m.status===200)return this.GetUsers(),this.selectedUser=null,this.selectedRole=[],this.closeAddOrUpdateModalVisible(),this.snackbar.show("Sauvegard\xE9 avec succ\xE8s",{backgroundColor:"success",duration:3e3});t=m.data,this.snackbar.show(t,{backgroundColor:"danger",duration:5e3}),this.message=t},m=>{})}update(){let t="";if(!this.selectedUser){t="User wasn't selected, please select one user",this.snackbar.show(t,{backgroundColor:"danger",duration:5e3}),this.message=t;return}let e=this.updateForm.value.password,i=this.updateForm.value.passwordConfirm,c=(e??"")!=""&&(i??"")!="";if(c&&e!==i){t="Password Error, must be the same",this.snackbar.show(t,{backgroundColor:"danger",duration:5e3}),this.message=t;return}if(this.OrgUnitsIsEmpty()||this.RolesIsEmpty()){t="OrgUnits or Roles are Empty, they are required",this.snackbar.show(t,{backgroundColor:"danger",duration:5e3}),this.message=t;return}let m={id:this.selectedUser.id,username:this.selectedUser.username,fullname:this.updateForm.value.fullname,email:this.updateForm.value.email,isActive:this.updateForm.value.isActive===!0,roles:this.selectedRole,countries:this.countries,regions:this.regions,prefectures:this.prefectures,communes:this.communes,hospitals:this.hospitals,districtQuartiers:this.districtQuartiers,villageSecteurs:this.villageSecteurs,chws:this.chwsList.filter(g=>this.districtQuartiers.map(p=>p.id).includes(g.district_quartier_id)),recos:this.recosList.filter(g=>this.villageSecteurs.map(p=>p.id).includes(g.village_secteur_id))};c&&(m.password=e),this.api.updateUser(m).subscribe(g=>{if(g.status===200)return this.GetUsers(),this.selectedUser=null,this.selectedRole=[],this.closeAddOrUpdateModalVisible(),this.snackbar.show("Modifi\xE9 avec succ\xE8s",{backgroundColor:"success",duration:3e3});t=g.data,this.snackbar.show(t,{backgroundColor:"danger",duration:5e3}),this.message=t},g=>{})}updatePassword(){let t=this.updatePasswordForm.value.password,e=this.updatePasswordForm.value.passwordConfirm;if((t??"")!=""&&(e??"")!=""&&t==e&&this.selectedUser){let i=this.selectedUser;i.password=t,this.api.updatePassword(i).subscribe(c=>{c.status===200&&(this.GetUsers(),this.selectedUser=null,this.selectedRole=[])},c=>{})}}delete(){let t=this.userCtx.currentUserCtx;this.selectedUser&&t&&this.selectedUser.id!=t.id&&this.api.deleteUser(this.selectedUser).subscribe(e=>{e.status===200&&(this.GetUsers(),this.selectedUser=null,this.selectedRole=[])},e=>{})}containsRole(t){return this.selectedRole.includes(`${t}`)}AddOrRemoveRole(t){let e=this.selectedRole.indexOf(`${t}`);e!==-1?this.selectedRole.splice(e,1):this.selectedRole.push(`${t}`)}SelectRoles(){this.selectedRole.length==this.roles$.length?this.selectedRole=[]:this.selectedRole=this.roles$.filter(t=>st(t?.id)).map(t=>t?.id?`${t?.id}`:"")}};s.\u0275fac=function(e){return new(e||s)(k(Pt),k(H),k(Ut),k(Ot),k(Mt))},s.\u0275cmp=F({type:s,selectors:[["app-admin-user"]],decls:68,vars:5,consts:[[1,"row","g-4"],[1,"col-12"],[1,"bg-white","rounded","h-100","p-4"],[1,"mb-4"],[2,"color","black"],["type","button",1,"btn","btn-success",2,"float","right",3,"click"],[1,"table-responsive"],[1,"table","table-white"],["colspan","3"],[4,"ngFor","ngForOf"],["class","absolute-fix-modal-parent animated fadeIn",4,"ngIf"],["id","modal-primary",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["height","30","alt","","srcset","",1,"modal-title",3,"src"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-md-6"],[2,"margin-left","5px"],[1,"modal-footer"],["id","close-modal","type","button","data-dismiss","modal",1,"btn","btn-default"],["id","modal-danger",1,"modal","fade"],[1,"modal-content","bg-danger"],[1,"modal-title"],["id","close-delete-modal","type","button","data-dismiss","modal","aria-label","Close",1,"close"],[1,"login-box-msg"],[1,"modal-footer","justify-content-between"],["type","button","data-dismiss","modal",1,"btn","btn-default"],["type","button",1,"btn","btn-danger","swalDefaultSuccess",3,"click"],[3,"class",4,"ngIf"],["scope","row"],["role","button","data-toggle","modal","data-target","#modal-show-roles",2,"cursor","pointer",3,"click"],[1,"glyphicon","glyphicon-eye-open"],[2,"font-size","20px","font-weight","bold"],["style","cursor: pointer; font-size: 15px; padding: 0px 4px 0px 6px;","class","btn btn-warning",3,"click",4,"ngIf"],["style","cursor: pointer; font-size: 12px; padding: 2px 8px 2px 8px;","class","btn btn-danger",3,"click",4,"ngIf"],["style","cursor: pointer; font-size: 15px;","class","btn-default",4,"ngIf"],[1,"btn","btn-warning",2,"cursor","pointer","font-size","15px","padding","0px 4px 0px 6px",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-danger",2,"cursor","pointer","font-size","12px","padding","2px 8px 2px 8px",3,"click"],[1,"fas","fa-trash-alt"],[1,"btn-default",2,"cursor","pointer","font-size","15px"],[1,"fa","fa-lock"],[1,"absolute-fix-modal-parent","animated","fadeIn"],["novalidate","",1,"form-horizontal",2,"width","600px",3,"ngSubmit","formGroup"],[1,"login-box-msg",2,"text-align","center"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["class","login-box-msg",4,"ngIf"],[1,"bg-white","rounded","h-0","p-4"],["id","accordionExample",1,"accordion"],[1,"accordion-item","bg-transparent"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[1,"col-6"],[1,"input-group","mb-3","col-6"],[1,"input-group-text"],[1,"fas","fa-user"],["id","username","type","text","placeholder","Username","formControlName","username","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",2,"background-color","white"],["id","fullname","type","text","placeholder","Full Name","formControlName","fullname","aria-label","Full Name","aria-describedby","basic-addon1",1,"form-control",2,"background-color","white"],[1,"fas","fa-lock"],["id","password","type","password","placeholder","Password","formControlName","password","aria-label","Password","aria-describedby","basic-addon1",1,"form-control",2,"background-color","white"],[1,"fas","fa-envelope"],["id","email","type","email","placeholder","Email","formControlName","email","aria-label","Email","aria-describedby","basic-addon1",1,"form-control",2,"background-color","white"],[1,"form-check",2,"margin-left","10px"],["id","isActive","type","checkbox","formControlName","isActive",1,"form-check-input",2,"zoom","1.5"],["for","isActive",1,"form-check-label",2,"margin-top","10px"],["id","passwordConfirm","type","password","placeholder","Retype password","formControlName","passwordConfirm","aria-label","Password Confirm","aria-describedby","basic-addon1",1,"form-control",2,"background-color","white"],["class","btn btn-danger",4,"ngIf"],["id","headingTwo",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingTwo","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,"form-check",2,"margin-left","10px","margin-bottom","5px"],["id","all-roles-checked","type","checkbox",1,"form-check-input",2,"zoom","1.3",3,"click","checked"],["for","all-roles-checked",1,"form-check-label",2,"margin-top","5px","cursor","pointer"],[2,"max-height","200px","overflow-y","scroll","overflow-x","hidden","border","1px darkblue dashed","padding","10px"],["id","headingThree",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseThree","aria-expanded","false","aria-controls","collapseThree",1,"accordion-button","collapsed"],["id","collapseThree","aria-labelledby","headingThree","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[2,"max-height","400px","overflow-y","scroll","overflow-x","hidden","border","1px darkblue dashed","padding","10px"],["class","org-units-checkbox-parent",4,"ngFor","ngForOf"],["id","close-modal","type","button","data-dismiss","modal",1,"btn","btn-default",3,"click"],["type","submit",3,"disabled"],[1,"btn","btn-danger"],[1,"col-md-6",3,"ngClass"],["type","checkbox",1,"form-check-input",2,"zoom","1.1",3,"change","id","checked"],[1,"form-check-label",2,"margin-left","5px","cursor","pointer",3,"for"],[1,"org-units-checkbox-parent"],[1,"input-checkbox-group"],["type","button",1,"list-unlist",3,"click"],["type","checkbox",1,"form-check-input","org-units-check-input",3,"change","checked","id"],[1,"form-check-label","org-units-label",3,"for"],["class","org-units-checkbox-parent checkbox-list",3,"ngClass",4,"ngFor","ngForOf"],[1,"org-units-checkbox-parent","checkbox-list",3,"ngClass"],["type","checkbox",3,"checked","disabled"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"b",4),l(5,"Utilisateurs"),r(),o(6,"button",5),f("click",function(){return i.CreateUser()}),l(7," Add User "),r()(),o(8,"div",6)(9,"table",7)(10,"thead")(11,"tr")(12,"th"),l(13,"N\xB0"),r(),o(14,"th"),l(15,"Username"),r(),o(16,"th"),l(17,"Full name"),r(),o(18,"th"),l(19,"Email"),r(),o(20,"th"),l(21,"R\xF4les"),r(),o(22,"th"),l(23,"Default Page"),r(),o(24,"th"),l(25,"IsOff"),r(),o(26,"th"),l(27,"IsAdmin"),r(),_(28,"th",8),r()(),C(29,Jt,2,1,"tbody",9),r()()()()(),C(30,ce,77,16,"div",10),o(31,"div",11)(32,"div",12)(33,"div",13)(34,"div",14),_(35,"img",15),o(36,"button",16)(37,"span",17),l(38,"\xD7"),r()()(),o(39,"div",18)(40,"div",19)(41,"div",20)(42,"h1")(43,"span",21),l(44,"R\xF4les"),r()(),C(45,pe,4,5,"p",9),r()()(),o(46,"div",22)(47,"button",23),l(48,"Close"),r()()()()(),o(49,"div",24)(50,"div",12)(51,"div",25)(52,"div",14)(53,"h4",26),l(54,"Suppression d'utilisateur"),r(),o(55,"button",27)(56,"span",17),l(57,"\xD7"),r()()(),o(58,"div",18),l(59," Cette action est ir\xE9versible! \xCAtes vous s\xFBr de proc\xE9der \xE0 la suppression ? "),o(60,"p",28)(61,"strong"),l(62),r()()(),o(63,"div",29)(64,"button",30),l(65,"Annuler"),r(),o(66,"button",31),f("click",function(){return i.delete()}),l(67,"Oui Supprimer !"),r()()()()()),e&2&&(d(29),u("ngForOf",i.users$),d(),u("ngIf",i.addOrUpdateModalVisible),d(5),B("src",i.APP_LOGO,et),d(10),u("ngForOf",i.roles$),d(17),b(i.message))},dependencies:[at,G,U,Y,K,lt,j,Q,z,q],styles:[".checkbox-group[_ngcontent-%COMP%]{position:relative}.parent-checkbox[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center}.checkbox-list[_ngcontent-%COMP%]{display:none;background-color:#fff;border:none;padding:5px}.checkbox-list.show[_ngcontent-%COMP%]{display:block}.list-unlist[_ngcontent-%COMP%]{background:transparent!important;border:none!important;color:#02024a!important;cursor:pointer!important;font-size:1.6rem!important;padding:0;margin-top:-8px;margin-left:2px;font-weight:bolder;transition:color .3s ease-in-out!important;width:15px;height:15px}.list-unlist[_ngcontent-%COMP%]:hover{color:#00008b!important}.org-units-label[_ngcontent-%COMP%]{margin-left:5px!important;cursor:pointer!important}.org-units-checkbox-parent[_ngcontent-%COMP%]{margin-left:25px!important;border-left:gray 1px dashed!important;padding:0!important}.input-checkbox-group[_ngcontent-%COMP%]{padding:0!important;margin-bottom:10px!important}.org-units-check-input[_ngcontent-%COMP%]{margin-left:5px!important;cursor:pointer!important}.absolute-fix-modal-parent[_ngcontent-%COMP%]{position:absolute!important;z-index:99999999999!important;top:0!important;right:0!important;left:0!important;width:100%!important;height:100%!important;background-color:#0009;align-items:center!important;justify-content:center!important;display:flex}.absolute-fix-modal[_ngcontent-%COMP%]{position:absolute!important;z-index:9999999999999999999!important;top:0!important;right:0!important;left:0!important;width:100%!important;height:100%!important;background-color:#fff;opacity:1!important;align-items:center!important;justify-content:center!important;display:flex}.absolute-fix-modal-chid[_ngcontent-%COMP%]{position:absolute;top:10;background-color:#fff!important}.close[_ngcontent-%COMP%]{background:transparent!important;border:none!important;color:#000!important;cursor:pointer!important;font-size:1.5rem!important;transition:color .3s ease-in-out!important}.close[_ngcontent-%COMP%]:hover{color:#ff5c5c!important}.undeleted-user[_ngcontent-%COMP%]{background-color:#fff}.deleted-user[_ngcontent-%COMP%]{background-color:#f1f1f1}.action-checked[_ngcontent-%COMP%]{color:#000}.action-unchecked[_ngcontent-%COMP%]{color:#d6d5d5}"]});let a=s;return a})();var Nt=a=>({"custom-class":a});function ue(a,s){if(a&1){let n=E();o(0,"i",16),f("click",function(){v(n);let e=h().$implicit,i=h();return x(i.EditRole(e))}),r()}}function he(a,s){if(a&1){let n=E();o(0,"i",17),f("click",function(){v(n);let e=h().$implicit,i=h();return x(i.RoleSelectedToDelete(e))}),r()}}function ge(a,s){if(a&1&&(o(0,"tbody")(1,"tr")(2,"td",13),l(3),r(),o(4,"td"),l(5),r(),o(6,"td"),C(7,ue,1,0,"i",14),r(),o(8,"td"),C(9,he,1,0,"i",15),r()()()),a&2){let n=s.$implicit;d(3),b(n.id),d(2),b(n.name),d(2),u("ngIf",!(n.autorizations!=null&&n.autorizations.includes("_admin"))),d(2),u("ngIf",!(n.autorizations!=null&&n.autorizations.includes("_admin")))}}function fe(a,s){if(a&1){let n=E();o(0,"div",18)(1,"div",19)(2,"div",20)(3,"h4",21),l(4,"Suppression de role"),r(),o(5,"button",22),f("click",function(){v(n);let e=h();return x(e.closeRemoveRoleModalVisible())}),o(6,"span",23),l(7,"\xD7"),r()()(),o(8,"div",24)(9,"p",25),l(10," Cette autorization est ir\xE9versible! \xCAtes vous s\xFBr de proc\xE9der \xE0 la suppression ? "),r(),o(11,"p",26)(12,"strong"),l(13),r()()(),o(14,"div",27)(15,"button",28),f("click",function(){v(n);let e=h();return x(e.closeRemoveRoleModalVisible())}),l(16,"Annuler"),r(),o(17,"button",29),f("click",function(){v(n);let e=h();return x(e.DeleteRole())}),l(18,"Oui Supprimer !"),r()()()()}if(a&2){let n=h();d(13),b(n.message)}}function _e(a,s){if(a&1&&(o(0,"p",26)(1,"strong"),l(2),r()()),a&2){let n=h(2);d(2),b(n.message)}}function ve(a,s){if(a&1){let n=E();it(0),o(1,"div",66)(2,"p")(3,"input",67),f("click",function(){let e=v(n).$implicit,i=h(2);return x(i.AddOrRemoveRoute(e))}),r(),o(4,"span",68),f("click",function(){let e=v(n).$implicit,i=h(2);return x(i.AddOrRemoveRoute(e))}),l(5),r()()(),nt()}if(a&2){let n=s.$implicit,t=s.index,e=h(2);d(),u("ngClass",M(3,Nt,t<=e.routes$.length/2)),d(2),u("checked",e.containsRoute(n)),d(2),R(" ",n.label,"")}}function xe(a,s){if(a&1&&(o(0,"option",69),l(1),r()),a&2){let n=s.$implicit;B("value",n.path),d(),R(" ",n.label," ")}}function be(a,s){if(a&1){let n=E();it(0),o(1,"div",70)(2,"p")(3,"input",67),f("click",function(){let e=v(n).$implicit,i=h(2);return x(i.AddOrRemoveAutorization(e))}),r(),o(4,"span",68),f("click",function(){let e=v(n).$implicit,i=h(2);return x(i.AddOrRemoveAutorization(e))}),l(5),r()()(),nt()}if(a&2){let n=s.$implicit,t=s.index,e=h(2);d(),u("ngClass",M(3,Nt,t<=e.autorizations$.length/2)),d(2),u("checked",e.containsAutorization(n)),d(2),b(n)}}function Ce(a,s){if(a&1){let n=E();o(0,"div",30)(1,"form",31),f("ngSubmit",function(){v(n);let e=h();return x(e.CreateOrUpdateRole())}),o(2,"div",32)(3,"div",33)(4,"strong",34)(5,"span"),l(6),r()(),o(7,"button",35),f("click",function(){v(n);let e=h();return x(e.closeAddOrUpdateModalVisible())}),o(8,"span",23),l(9,"\xD7"),r()()(),o(10,"div",24),C(11,_e,3,1,"p",36),o(12,"div",37)(13,"div",38)(14,"div",39)(15,"span",40),_(16,"span",41),r(),_(17,"input",42),r()(),_(18,"div",38),r(),o(19,"div",43)(20,"div",44)(21,"div",45)(22,"h2",46)(23,"button",47),l(24," Pages d'acc\xE8s \xE0 celui qui aura ce role "),r()(),o(25,"div",48)(26,"div",49)(27,"div",50)(28,"input",51),f("click",function(){v(n);let e=h();return x(e.SelectAllRoutes())}),r(),o(29,"label",52),l(30," Select All Pages "),r()(),_(31,"br"),o(32,"div",53)(33,"div",37),C(34,ve,6,5,"ng-container",10),r()(),_(35,"br"),o(36,"div",54)(37,"select",55)(38,"option",56),l(39,"---- Page par d\xE9faut ----"),r(),C(40,xe,2,2,"option",57),r()()()()(),o(41,"div",45)(42,"h2",58)(43,"button",59),l(44," Autorizations d'actions pour ce role "),r()(),o(45,"div",60)(46,"div",49)(47,"div",50)(48,"input",61),f("click",function(){v(n);let e=h();return x(e.SelectAllAutorizations())}),r(),o(49,"label",62),l(50," Select all Autorizations "),r()(),_(51,"br"),o(52,"div",63)(53,"div",37),C(54,be,6,5,"ng-container",10),r()()()()()()()(),o(55,"div",27)(56,"button",64),f("click",function(){v(n);let e=h();return x(e.closeAddOrUpdateModalVisible())}),l(57,"Fermer"),r(),o(58,"button",65),l(59),r()()()()()}if(a&2){let n=h();d(),u("formGroup",n.roleForm),d(4),L(" btn-",n.isEditMode?"warning":"success",""),d(),R(" ",n.isEditMode?"Modifier un role":"Ajouter un role",""),d(5),u("ngIf",n.message!=""),d(17),u("checked",n.selectedRoute.length==n.routes$.length),d(6),u("ngForOf",n.routes$),d(6),u("ngForOf",n.selectedRoute),d(8),u("checked",n.selectedAutorization.length==n.autorizations$.length),d(6),u("ngForOf",n.autorizations$),d(4),L("btn btn-",n.isEditMode?"warning":"success",""),u("disabled",!n.roleForm.valid),d(),R("",n.isEditMode?"Modifier":"Sauvegarder"," ")}}var Wt=(()=>{let s=class s{activeSave(){throw new Error("Method not implemented.")}constructor(t,e,i,c){this.auth=t,this.api=e,this.fix=i,this.router=c,this.roles$=[],this.routes$=[],this.autorizations$=[],this.isLoading=!1,this.LoadingMsg="Loading...",this.isEditMode=!1,this.message="",this.selectedRoute=[],this.selectedAutorization=[],this.addOrUpdateModalVisible=!1,this.removeRoleModalVisible=!1}ngOnInit(){this.GetRoles(),this.GetUserAutorizations(),this.GetUserRoutes(),this.roleForm=this.createFormGroup()}GetRoles(){this.api.GetRoles().subscribe(t=>P(this,null,function*(){t.status==200&&(this.roles$=t.data)}),t=>{})}GetUserAutorizations(){this.api.UserAutorizations().subscribe(t=>P(this,null,function*(){t.status==200&&(this.autorizations$=t.data)}),t=>{})}GetUserRoutes(){this.api.UserRoutes().subscribe(t=>P(this,null,function*(){t.status==200&&(this.routes$=t.data)}),t=>{})}closeAddOrUpdateModalVisible(){this.addOrUpdateModalVisible=!1}openAddOrUpdateModalVisible(){this.addOrUpdateModalVisible=!0}closeRemoveRoleModalVisible(){this.removeRoleModalVisible=!1}openRemoveRoleModalVisible(){this.removeRoleModalVisible=!0}EditRole(t){this.isEditMode=!0,this.selectedRoute=this.routes$.filter(e=>(t.routes??[]).map(i=>i.path).includes(e.path)),this.selectedAutorization=this.autorizations$.filter(e=>(t.autorizations??[]).includes(e)),this.roleForm=this.createFormGroup(t),this.selectedRole=t,this.message="",this.openAddOrUpdateModalVisible()}RoleSelectedToDelete(t){this.selectedRole=t,this.message="",this.openRemoveRoleModalVisible()}DeleteRole(){this.isEditMode=!1,this.selectedRole&&this.api.DeleteRole(this.selectedRole).subscribe(t=>{t.status===200?(this.showModalToast("success","Supprim\xE9 avec success"),console.log("successfully deleted!"),this.GetRoles(),this.selectedRole=null,this.selectedRoute=[],this.selectedAutorization=[],this.isLoading=!1,this.message="",this.closeRemoveRoleModalVisible()):this.message=t.data},t=>{this.message=t,this.isLoading=!1,console.log(this.message)})}CreateRole(){this.isEditMode=!1,this.roleForm=this.createFormGroup(),this.selectedRole=null,this.selectedRoute=[],this.selectedAutorization=[],this.message="",this.openAddOrUpdateModalVisible()}containsRoute(t){let e=this.selectedRoute.find(i=>i.path===t.path);return e!=null}containsAutorization(t){return this.selectedAutorization.includes(t)}AddOrRemoveRoute(t){let[e,i]=(()=>{let c=-1;return[this.selectedRoute.find((g,p)=>g.path===t.path?(c=p,!0):!1),c]})();i!==-1?this.selectedRoute.splice(i,1):this.selectedRoute.push(t)}SelectAllRoutes(){this.selectedRoute.length==this.routes$.length?this.selectedRoute=[]:this.selectedRoute=this.routes$}SelectAllAutorizations(){this.selectedAutorization.length==this.autorizations$.length?this.selectedAutorization=[]:this.selectedAutorization=this.autorizations$}AddOrRemoveAutorization(t){let e=this.selectedAutorization.indexOf(t);e!==-1?this.selectedAutorization.splice(e,1):this.selectedAutorization.push(t)}createFormGroup(t){let e={name:new S(t?.name??"",[y.required,y.minLength(4)]),default_route:new S(t?.default_route?.path??"")};return this.isEditMode&&e.name.disable(),new V(e)}showModalToast(t,e){this.closeModal("close-delete-modal")}closeModal(t="close-modal"){}ToStringNewLine(t,e){return t!=null?`${t}`.toString().replace(/,/g,"<br>"):""}CreateOrUpdateRole(){var t;if(this.isEditMode?this.selectedRole&&(this.selectedRole.name=this.roleForm.value.name,this.selectedRole.default_route=this.selectedRoute.find(e=>e.path===this.roleForm.value.default_route),this.selectedRole.routes=this.selectedRoute,this.selectedRole.autorizations=this.selectedAutorization,t=this.api.UpdateRole(this.selectedRole)):(this.roleForm.value.default_route=this.selectedRoute.find(e=>e.path===this.roleForm.value.default_route),this.roleForm.value.routes=this.selectedRoute,this.roleForm.value.autorizations=this.selectedAutorization,t=this.api.CreateRole(this.roleForm.value)),t)return t.subscribe(e=>{e.status===200?(this.message="Registed successfully !",this.closeModal(),this.GetRoles(),this.selectedRole=null,this.selectedRoute=[],this.selectedAutorization=[],this.message="",this.closeAddOrUpdateModalVisible()):this.message=e.data,console.log(this.message),this.isLoading=!1},e=>{this.isLoading=!1})}};s.\u0275fac=function(e){return new(e||s)(k(mt),k(H),k(Lt),k(Z))},s.\u0275cmp=F({type:s,selectors:[["app-admin-roles"]],decls:21,vars:3,consts:[[1,"row","g-4"],[1,"col-12"],[1,"bg-white","rounded","h-100","p-4"],[1,"mb-4"],[2,"color","black"],["type","button","data-toggle","modal","data-target","#modal-default",1,"btn","btn-success",2,"float","right",3,"click"],[1,"table-responsive"],[1,"table","table-white"],["scope","col"],["colspan","2","scope","col"],[4,"ngFor","ngForOf"],["class","absolute-fix-modal-parent",4,"ngIf"],["class","absolute-fix-modal-parent animated fadeIn",4,"ngIf"],["scope","row"],["style","padding: 1px 4px 1px 6px;","class","btn btn-warning fas fa-edit",3,"click",4,"ngIf"],["style","padding: 1px 6px 1px 6px;","class","btn btn-danger fas fa-trash-alt",3,"click",4,"ngIf"],[1,"btn","btn-warning","fas","fa-edit",2,"padding","1px 4px 1px 6px",3,"click"],[1,"btn","btn-danger","fas","fa-trash-alt",2,"padding","1px 6px 1px 6px",3,"click"],[1,"absolute-fix-modal-parent"],[1,"modal-content","animated","fadeIn",2,"width","600px","position","absolute","top","0","margin-top","20px"],[1,"modal-header","bg-danger"],[1,"modal-title"],["id","close-delete-modal","type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[2,"font-size","20px"],[1,"login-box-msg"],[1,"modal-footer","justify-content-between"],["type","button",1,"btn","btn-default",3,"click"],["type","button",1,"btn","btn-danger","swalDefaultSuccess",3,"click"],[1,"absolute-fix-modal-parent","animated","fadeIn"],["novalidate","",1,"form-horizontal",2,"width","800px",3,"ngSubmit","formGroup"],[1,"modal-content"],[1,"modal-header"],[1,"login-box-msg",2,"text-align","center"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["class","login-box-msg",4,"ngIf"],[1,"row"],[1,"col-6"],[1,"input-group","mb-3","col-6"],["id","basic-addon1",1,"input-group-text"],[1,"fas","fa-user"],["type","text","placeholder","Name","formControlName","name","aria-label","Name","aria-describedby","basic-addon1",1,"form-control",2,"background-color","white"],[1,"bg-white","rounded","h-0","p-4"],["id","accordionExample",1,"accordion"],[1,"accordion-item","bg-transparent"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[1,"form-check",2,"margin-left","10px"],["id","all-pages-checked","type","checkbox",1,"form-check-input",2,"zoom","1.5",3,"click","checked"],["for","all-pages-checked",1,"form-check-label"],[2,"max-height","300px","overflow-y","scroll","overflow-x","hidden","border","1px darkblue dashed","padding","10px"],[1,"input-group","mb-3"],["formControlName","default_route",1,"form-control",2,"background-color","white"],["value",""],[3,"value",4,"ngFor","ngForOf"],["id","headingTwo",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed"],["id","collapseTwo","aria-labelledby","headingTwo","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],["id","all-autorizations-checked","type","checkbox",1,"form-check-input",2,"zoom","1.5",3,"click","checked"],["for","all-autorizations-checked",1,"form-check-label"],[2,"max-height","200px","overflow-y","scroll","overflow-x","hidden","border","1px darkblue dashed","padding","10px"],["id","close-modal","type","button","data-dismiss","modal",1,"btn","btn-default",3,"click"],["type","submit",3,"disabled"],[1,"col-6",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"click","checked"],[2,"margin-left","5px","cursor","pointer",3,"click"],[3,"value"],[1,"col-md-6",3,"ngClass"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h6",3)(4,"b",4),l(5,"Roles List"),r(),o(6,"button",5),f("click",function(){return i.CreateRole()}),l(7," Add Role "),r()(),o(8,"div",6)(9,"table",7)(10,"thead")(11,"tr")(12,"th",8),l(13,"id"),r(),o(14,"th",8),l(15,"Name"),r(),o(16,"th",9),l(17,"Actions"),r()()(),C(18,ge,10,4,"tbody",10),r()()()()(),C(19,fe,19,1,"div",11)(20,Ce,60,16,"div",12)),e&2&&(d(18),u("ngForOf",i.roles$),d(),u("ngIf",i.removeRoleModalVisible),d(),u("ngIf",i.addOrUpdateModalVisible))},dependencies:[at,G,U,Y,ct,pt,K,dt,j,Q,z,q],styles:[".absolute-fix-modal-parent[_ngcontent-%COMP%]{position:absolute!important;z-index:99999999999!important;top:0!important;right:0!important;left:0!important;width:100%!important;height:100%!important;background-color:#0009;align-items:center!important;justify-content:center!important;display:flex}.absolute-fix-modal[_ngcontent-%COMP%]{position:absolute!important;z-index:9999999999999999999!important;top:0!important;right:0!important;left:0!important;width:100%!important;height:100%!important;background-color:#fff;opacity:1!important;align-items:center!important;justify-content:center!important;display:flex}.absolute-fix-modal-chid[_ngcontent-%COMP%]{position:absolute;top:10;background-color:#fff!important}.close[_ngcontent-%COMP%]{background:transparent!important;border:none!important;color:#000!important;cursor:pointer!important;font-size:1.5rem!important;transition:color .3s ease-in-out!important}.close[_ngcontent-%COMP%]:hover{color:#ff5c5c!important}"]});let a=s;return a})();var Bt=(()=>{let s=class s{constructor(t){this.router=t}ngOnInit(){}};s.\u0275fac=function(e){return new(e||s)(k(Z))},s.\u0275cmp=F({type:s,selectors:[["app-admin-user"]],decls:0,vars:0,template:function(e,i){}});let a=s;return a})();var tt=class{constructor(s,n,t,e){if(isNaN(s)||isNaN(n))throw new Error(`Point is invalid: (${s}, ${n})`);this.x=+s,this.y=+n,this.pressure=t||0,this.time=e||Date.now()}distanceTo(s){return Math.sqrt(Math.pow(this.x-s.x,2)+Math.pow(this.y-s.y,2))}equals(s){return this.x===s.x&&this.y===s.y&&this.pressure===s.pressure&&this.time===s.time}velocityFrom(s){return this.time!==s.time?this.distanceTo(s)/(this.time-s.time):0}},xt=class a{static fromPoints(s,n){let t=this.calculateControlPoints(s[0],s[1],s[2]).c2,e=this.calculateControlPoints(s[1],s[2],s[3]).c1;return new a(s[1],t,e,s[2],n.start,n.end)}static calculateControlPoints(s,n,t){let e=s.x-n.x,i=s.y-n.y,c=n.x-t.x,m=n.y-t.y,g={x:(s.x+n.x)/2,y:(s.y+n.y)/2},p={x:(n.x+t.x)/2,y:(n.y+t.y)/2},A=Math.sqrt(e*e+i*i),w=Math.sqrt(c*c+m*m),N=g.x-p.x,W=g.y-p.y,O=w/(A+w),X={x:p.x+N*O,y:p.y+W*O},Ct=n.x-X.x,At=n.y-X.y;return{c1:new tt(g.x+Ct,g.y+At),c2:new tt(p.x+Ct,p.y+At)}}constructor(s,n,t,e,i,c){this.startPoint=s,this.control2=n,this.control1=t,this.endPoint=e,this.startWidth=i,this.endWidth=c}length(){let n=0,t,e;for(let i=0;i<=10;i+=1){let c=i/10,m=this.point(c,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),g=this.point(c,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(i>0){let p=m-t,A=g-e;n+=Math.sqrt(p*p+A*A)}t=m,e=g}return n}point(s,n,t,e,i){return n*(1-s)*(1-s)*(1-s)+3*t*(1-s)*(1-s)*s+3*e*(1-s)*s*s+i*s*s*s}},bt=class{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(s,n,t){this._et.addEventListener(s,n,t)}dispatchEvent(s){return this._et.dispatchEvent(s)}removeEventListener(s,n,t){this._et.removeEventListener(s,n,t)}};function Ae(a,s=250){let n=0,t=null,e,i,c,m=()=>{n=Date.now(),t=null,e=a.apply(i,c),t||(i=null,c=[])};return function(...p){let A=Date.now(),w=s-(A-n);return i=this,c=p,w<=0||w>s?(t&&(clearTimeout(t),t=null),n=A,e=a.apply(i,c),t||(i=null,c=[])):t||(t=window.setTimeout(m,w)),e}}var ht=class a extends bt{constructor(s,n={}){super(),this.canvas=s,this._drawingStroke=!1,this._isEmpty=!0,this._lastPoints=[],this._data=[],this._lastVelocity=0,this._lastWidth=0,this._handleMouseDown=t=>{t.buttons===1&&this._strokeBegin(t)},this._handleMouseMove=t=>{this._strokeMoveUpdate(t)},this._handleMouseUp=t=>{t.buttons===1&&this._strokeEnd(t)},this._handleTouchStart=t=>{if(t.cancelable&&t.preventDefault(),t.targetTouches.length===1){let e=t.changedTouches[0];this._strokeBegin(e)}},this._handleTouchMove=t=>{t.cancelable&&t.preventDefault();let e=t.targetTouches[0];this._strokeMoveUpdate(e)},this._handleTouchEnd=t=>{if(t.target===this.canvas){t.cancelable&&t.preventDefault();let i=t.changedTouches[0];this._strokeEnd(i)}},this._handlePointerStart=t=>{t.preventDefault(),this._strokeBegin(t)},this._handlePointerMove=t=>{this._strokeMoveUpdate(t)},this._handlePointerEnd=t=>{this._drawingStroke&&(t.preventDefault(),this._strokeEnd(t))},this.velocityFilterWeight=n.velocityFilterWeight||.7,this.minWidth=n.minWidth||.5,this.maxWidth=n.maxWidth||2.5,this.throttle="throttle"in n?n.throttle:16,this.minDistance="minDistance"in n?n.minDistance:5,this.dotSize=n.dotSize||0,this.penColor=n.penColor||"black",this.backgroundColor=n.backgroundColor||"rgba(0,0,0,0)",this.compositeOperation=n.compositeOperation||"source-over",this.canvasContextOptions="canvasContextOptions"in n?n.canvasContextOptions:{},this._strokeMoveUpdate=this.throttle?Ae(a.prototype._strokeUpdate,this.throttle):a.prototype._strokeUpdate,this._ctx=s.getContext("2d",this.canvasContextOptions),this.clear(),this.on()}clear(){let{_ctx:s,canvas:n}=this;s.fillStyle=this.backgroundColor,s.clearRect(0,0,n.width,n.height),s.fillRect(0,0,n.width,n.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(s,n={}){return new Promise((t,e)=>{let i=new Image,c=n.ratio||window.devicePixelRatio||1,m=n.width||this.canvas.width/c,g=n.height||this.canvas.height/c,p=n.xOffset||0,A=n.yOffset||0;this._reset(this._getPointGroupOptions()),i.onload=()=>{this._ctx.drawImage(i,p,A,m,g),t()},i.onerror=w=>{e(w)},i.crossOrigin="anonymous",i.src=s,this._isEmpty=!1})}toDataURL(s="image/png",n){switch(s){case"image/svg+xml":return typeof n!="object"&&(n=void 0),`data:image/svg+xml;base64,${btoa(this.toSVG(n))}`;default:return typeof n!="number"&&(n=void 0),this.canvas.toDataURL(s,n)}}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";let s=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!s?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(s,{clear:n=!0}={}){n&&this.clear(),this._fromData(s,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(s)}toData(){return this._data}_getPointGroupOptions(s){return{penColor:s&&"penColor"in s?s.penColor:this.penColor,dotSize:s&&"dotSize"in s?s.dotSize:this.dotSize,minWidth:s&&"minWidth"in s?s.minWidth:this.minWidth,maxWidth:s&&"maxWidth"in s?s.maxWidth:this.maxWidth,velocityFilterWeight:s&&"velocityFilterWeight"in s?s.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:s&&"compositeOperation"in s?s.compositeOperation:this.compositeOperation}}_strokeBegin(s){if(!this.dispatchEvent(new CustomEvent("beginStroke",{detail:s,cancelable:!0})))return;this._drawingStroke=!0;let t=this._getPointGroupOptions(),e=Object.assign(Object.assign({},t),{points:[]});this._data.push(e),this._reset(t),this._strokeUpdate(s)}_strokeUpdate(s){if(!this._drawingStroke)return;if(this._data.length===0){this._strokeBegin(s);return}this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:s}));let n=s.clientX,t=s.clientY,e=s.pressure!==void 0?s.pressure:s.force!==void 0?s.force:0,i=this._createPoint(n,t,e),c=this._data[this._data.length-1],m=c.points,g=m.length>0&&m[m.length-1],p=g?i.distanceTo(g)<=this.minDistance:!1,A=this._getPointGroupOptions(c);if(!g||!(g&&p)){let w=this._addPoint(i,A);g?w&&this._drawCurve(w,A):this._drawDot(i,A),m.push({time:i.time,x:i.x,y:i.y,pressure:i.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:s}))}_strokeEnd(s){this._drawingStroke&&(this._strokeUpdate(s),this._drawingStroke=!1,this.dispatchEvent(new CustomEvent("endStroke",{detail:s})))}_handlePointerEvents(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(s){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(s.minWidth+s.maxWidth)/2,this._ctx.fillStyle=s.penColor,this._ctx.globalCompositeOperation=s.compositeOperation}_createPoint(s,n,t){let e=this.canvas.getBoundingClientRect();return new tt(s-e.left,n-e.top,t,new Date().getTime())}_addPoint(s,n){let{_lastPoints:t}=this;if(t.push(s),t.length>2){t.length===3&&t.unshift(t[0]);let e=this._calculateCurveWidths(t[1],t[2],n),i=xt.fromPoints(t,e);return t.shift(),i}return null}_calculateCurveWidths(s,n,t){let e=t.velocityFilterWeight*n.velocityFrom(s)+(1-t.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(e,t),c={end:i,start:this._lastWidth};return this._lastVelocity=e,this._lastWidth=i,c}_strokeWidth(s,n){return Math.max(n.maxWidth/(s+1),n.minWidth)}_drawCurveSegment(s,n,t){let e=this._ctx;e.moveTo(s,n),e.arc(s,n,t,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(s,n){let t=this._ctx,e=s.endWidth-s.startWidth,i=Math.ceil(s.length())*2;t.beginPath(),t.fillStyle=n.penColor;for(let c=0;c<i;c+=1){let m=c/i,g=m*m,p=g*m,A=1-m,w=A*A,N=w*A,W=N*s.startPoint.x;W+=3*w*m*s.control1.x,W+=3*A*g*s.control2.x,W+=p*s.endPoint.x;let O=N*s.startPoint.y;O+=3*w*m*s.control1.y,O+=3*A*g*s.control2.y,O+=p*s.endPoint.y;let X=Math.min(s.startWidth+p*e,n.maxWidth);this._drawCurveSegment(W,O,X)}t.closePath(),t.fill()}_drawDot(s,n){let t=this._ctx,e=n.dotSize>0?n.dotSize:(n.minWidth+n.maxWidth)/2;t.beginPath(),this._drawCurveSegment(s.x,s.y,e),t.closePath(),t.fillStyle=n.penColor,t.fill()}_fromData(s,n,t){for(let e of s){let{points:i}=e,c=this._getPointGroupOptions(e);if(i.length>1)for(let m=0;m<i.length;m+=1){let g=i[m],p=new tt(g.x,g.y,g.pressure,g.time);m===0&&this._reset(c);let A=this._addPoint(p,c);A&&n(A,c)}else this._reset(c),t(i[0],c)}}toSVG({includeBackgroundColor:s=!1}={}){let n=this._data,t=Math.max(window.devicePixelRatio||1,1),e=0,i=0,c=this.canvas.width/t,m=this.canvas.height/t,g=document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.setAttribute("xmlns","http://www.w3.org/2000/svg"),g.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),g.setAttribute("viewBox",`${e} ${i} ${c} ${m}`),g.setAttribute("width",c.toString()),g.setAttribute("height",m.toString()),s&&this.backgroundColor){let p=document.createElement("rect");p.setAttribute("width","100%"),p.setAttribute("height","100%"),p.setAttribute("fill",this.backgroundColor),g.appendChild(p)}return this._fromData(n,(p,{penColor:A})=>{let w=document.createElement("path");if(!isNaN(p.control1.x)&&!isNaN(p.control1.y)&&!isNaN(p.control2.x)&&!isNaN(p.control2.y)){let N=`M ${p.startPoint.x.toFixed(3)},${p.startPoint.y.toFixed(3)} C ${p.control1.x.toFixed(3)},${p.control1.y.toFixed(3)} ${p.control2.x.toFixed(3)},${p.control2.y.toFixed(3)} ${p.endPoint.x.toFixed(3)},${p.endPoint.y.toFixed(3)}`;w.setAttribute("d",N),w.setAttribute("stroke-width",(p.endWidth*2.25).toFixed(3)),w.setAttribute("stroke",A),w.setAttribute("fill","none"),w.setAttribute("stroke-linecap","round"),g.appendChild(w)}},(p,{penColor:A,dotSize:w,minWidth:N,maxWidth:W})=>{let O=document.createElement("circle"),X=w>0?w:(N+W)/2;O.setAttribute("r",X.toString()),O.setAttribute("cx",p.x.toString()),O.setAttribute("cy",p.y.toString()),O.setAttribute("fill",A),g.appendChild(O)}),g.outerHTML}};function we(a,s){if(a&1&&_(0,"img",14),a&2){let n=h();u("src",n.signatureImage,et)}}var Gt=(()=>{let s=class s{updateMinWidth(t){let e=parseFloat(t.target.value);this.signaturePad.minWidth=e}updateMaxWidth(t){let e=parseFloat(t.target.value);this.signaturePad.maxWidth=e}updateBackgroundColor(t){let e=t.target.value;this.signaturePad.backgroundColor=e}updatePenColor(t){let e=t.target.value;this.signaturePad.penColor=e}updateVelocityFilterWeight(t){let e=parseFloat(t.target.value);this.signaturePad.velocityFilterWeight=e}updateThrottle(t){let e=parseFloat(t.target.value);this.signaturePad.throttle=e}updateMinDistance(t){let e=parseFloat(t.target.value);this.signaturePad.minDistance=e}updateDotSize(t){let e=parseFloat(t.target.value);this.signaturePad.dotSize=e}constructor(t){this.router=t,this.signatureImage=null,this.defaultMinWidth=.5,this.defaultMaxWidth=2.5,this.defaultBackgroundColor="rgba(255, 255, 255, 0)",this.defaultPenColor="rgb(0, 0, 0)",this.defaultVelocityFilterWeight=.7,this.defaultThrottle=16,this.defaultMinDistance=5,this.defaultDotSize=1}ngOnInit(){this.InitSignaturePadView()}InitSignaturePadView(){let t=document.getElementById("signature-pad");if(t){this.signaturePad=new ht(t,{minWidth:this.defaultMinWidth,maxWidth:this.defaultMaxWidth,backgroundColor:this.defaultBackgroundColor,penColor:this.defaultPenColor,velocityFilterWeight:this.defaultVelocityFilterWeight,throttle:this.defaultThrottle,minDistance:this.defaultMinDistance,dotSize:this.defaultDotSize});var e=document.getElementById("saveAsPNG"),i=document.getElementById("saveAsJPEG"),c=document.getElementById("saveAsJPEG_05"),m=document.getElementById("saveAsSVG"),g=document.getElementById("clear");let p=this;e&&e.addEventListener("click",function(A){var w=p.signaturePad.toDataURL("image/png");p.saveSignature(w)}),i&&i.addEventListener("click",function(A){var w=p.signaturePad.toDataURL("image/jpg");p.saveSignature(w)}),c&&c.addEventListener("click",function(A){var w=p.signaturePad.toDataURL("image/jpg",.5);p.saveSignature(w)}),m&&m.addEventListener("click",function(A){var w=p.signaturePad.toDataURL("image/svg+xml");p.saveSignature(w)}),g&&g.addEventListener("click",function(A){p.signaturePad.clear()})}}SvgStringWithoutBase64Convertion(t){return this.signaturePad.toSVG({includeBackgroundColor:t})}DrawSignatureDataURL(t,e){this.signaturePad.fromDataURL("data:image/png;base64,iVBORw0K...",{ratio:1,width:400,height:200,xOffset:100,yOffset:50})}DrawSignatureFromPointGroup(t,e){return this.signaturePad.fromData(t,{clear:e})}SignaturePointGroupsAsArray(){return this.signaturePad.toData()}isCanvasEmpty(){return this.signaturePad.isEmpty()}UnbindsAllEventHandlers(){this.signaturePad.off()}RebindsAllEventHandlers(){this.signaturePad.on()}clearSignature(){this.signaturePad.clear(),this.signatureImage=null}saveSignature(t){this.signatureImage=t}};s.\u0275fac=function(e){return new(e||s)(k(Z))},s.\u0275cmp=F({type:s,selectors:[["app-dashboard-1"]],decls:53,vars:9,consts:[[1,"wrapper"],["src","https://preview.ibb.co/jnW4Qz/Grumpy_Cat_920x584.jpg","width","400","height","200"],["id","signature-pad","width","400","height","200",1,"signature-pad"],["id","actionBtn"],["id","saveAsPNG"],["id","saveAsJPEG"],["id","saveAsJPEG_05"],["id","saveAsSVG"],["id","clear"],["alt","Signature",3,"src",4,"ngIf"],[1,"options-container"],[1,"option"],["type","number",3,"change","value"],["type","color",3,"change","value"],["alt","Signature",3,"src"]],template:function(e,i){e&1&&(o(0,"h1"),l(1,` Draw over image
`),r(),o(2,"div",0),_(3,"img",1)(4,"canvas",2),r(),o(5,"div",3)(6,"button",4),l(7,"saveAsPNG"),r(),o(8,"button",5),l(9,"saveAsJPEG"),r(),o(10,"button",6),l(11,"saveAsJPEG_05"),r(),o(12,"button",7),l(13,"saveAsSVG"),r(),o(14,"button",8),l(15,"Clear"),r()(),_(16,"br")(17,"br"),o(18,"div"),C(19,we,1,1,"img",9),r(),o(20,"div",10)(21,"div",11)(22,"label"),l(23,"Min Width:"),r(),o(24,"input",12),f("change",function(m){return i.updateMinWidth(m)}),r()(),o(25,"div",11)(26,"label"),l(27,"Max Width:"),r(),o(28,"input",12),f("change",function(m){return i.updateMaxWidth(m)}),r()(),o(29,"div",11)(30,"label"),l(31,"Background Color:"),r(),o(32,"input",13),f("change",function(m){return i.updateBackgroundColor(m)}),r()(),o(33,"div",11)(34,"label"),l(35,"Pen Color:"),r(),o(36,"input",13),f("change",function(m){return i.updatePenColor(m)}),r()(),o(37,"div",11)(38,"label"),l(39,"Velocity Filter Weight:"),r(),o(40,"input",12),f("change",function(m){return i.updateVelocityFilterWeight(m)}),r()(),o(41,"div",11)(42,"label"),l(43,"Throttle:"),r(),o(44,"input",12),f("change",function(m){return i.updateThrottle(m)}),r()(),o(45,"div",11)(46,"label"),l(47,"Min Distance:"),r(),o(48,"input",12),f("change",function(m){return i.updateMinDistance(m)}),r()(),o(49,"div",11)(50,"label"),l(51,"Dot Size:"),r(),o(52,"input",12),f("change",function(m){return i.updateDotSize(m)}),r()()()),e&2&&(d(19),u("ngIf",i.signatureImage),d(5),u("value",i.defaultMinWidth),d(4),u("value",i.defaultMaxWidth),d(4),u("value",i.defaultBackgroundColor),d(4),u("value",i.defaultPenColor),d(4),u("value",i.defaultVelocityFilterWeight),d(4),u("value",i.defaultThrottle),d(4),u("value",i.defaultMinDistance),d(4),u("value",i.defaultDotSize))},dependencies:[U],styles:[".wrapper[_ngcontent-%COMP%]{position:relative;width:400px;height:200px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:0;top:0}.signature-pad[_ngcontent-%COMP%]{position:absolute;left:0;top:0;width:400px;height:200px}#actionBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:5px}.options-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:20px}.option[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;align-items:center}.option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.option[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .option[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{padding:5px;border:1px solid #ccc;border-radius:3px;width:100px}"]});let a=s;return a})();var jt=(()=>{let s=class s{constructor(){}ngOnInit(){}OpenPdfFile(){}downloadPdf(){return P(this,null,function*(){})}download(t){let e=document.createElement("a");document.body.appendChild(e),e.style.display="none",e.href=t,e.download="generated.pdf",e.click(),URL.revokeObjectURL(t)}generatePdfCOntentData(){return[{text:"Beautiful PDF with Existing Data",style:"header"},{text:"Name:  + data.name"},{text:"Email:  + data.email"},{text:"Phone:  + data.phone"},{text:"Hello, World!",style:"header"},{text:"This is a paragraph",style:"paragraph"},{text:"Page 1 Content",style:"header"},{text:"This is page 1",style:"paragraph"},{text:"Page 2 Content",style:"header"},{text:"This is page 2",style:"paragraph"},{text:"Page 3 Content",style:"header"},{text:"This is page 3",style:"paragraph"},{text:"Page 4 Content",style:"header"},{text:"This is page 4",style:"paragraph"},{text:"Beautiful PDF with Existing Data",style:"header"},{text:"Name:  + data.name"},{text:"Email:  + data.email"},{text:"Phone:  + data.phone"},{text:"Hello, World!",style:"header"},{text:"This is a paragraph",style:"paragraph"},{text:"Page 1 Content",style:"header"},{text:"This is page 1",style:"paragraph"},{text:"Page 2 Content",style:"header"},{text:"This is page 2",style:"paragraph"},{text:"Page 3 Content",style:"header"},{text:"This is page 3",style:"paragraph"},{text:"Page 4 Content",style:"header"},{text:"This is page 4",style:"paragraph"},{text:"Beautiful PDF with Existing Data",style:"header"},{text:"Name: + data.name"},{text:"Email: + data.email"},{text:"Phone: + data.phone"},{text:"Hello, World!",style:"header"},{text:"This is a paragraph",style:"paragraph"},{text:"Page 1 Content",style:"header"},{text:"This is page 1",style:"paragraph"},{text:"Page 2 Content",style:"header"},{text:"This is page 2",style:"paragraph"},{text:"Page 3 Content",style:"header"},{text:"This is page 3",style:"paragraph"},{text:"Page 4 Content",style:"header"},{text:"This is page 4",style:"paragraph"},{text:"Hello, World!",style:"header"},{text:"This is a paragraph",style:"paragraph"},{text:"Table:",style:"subheader"},{ul:["Item 1","Item 2","Item 3"]},{text:"Images",style:"header"},{columns:[{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVEiJtZZPbBtFFMZ/M7ubXdtdb1xSFyeilBapySVU8h8OoFaooFSqiihIVIpQBKci6KEg9Q6H9kovIHoCIVQJJCKE1ENFjnAgcaSGC6rEnxBwA04Tx43t2FnvDAfjkNibxgHxnWb2e/u992bee7tCa00YFsffekFY+nUzFtjW0LrvjRXrCDIAaPLlW0nHL0SsZtVoaF98mLrx3pdhOqLtYPHChahZcYYO7KvPFxvRl5XPp1sN3adWiD1ZAqD6XYK1b/dvE5IWryTt2udLFedwc1+9kLp+vbbpoDh+6TklxBeAi9TL0taeWpdmZzQDry0AcO+jQ12RyohqqoYoo8RDwJrU+qXkjWtfi8Xxt58BdQuwQs9qC/afLwCw8tnQbqYAPsgxE1S6F3EAIXux2oQFKm0ihMsOF71dHYx+f3NND68ghCu1YIoePPQN1pGRABkJ6Bus96CutRZMydTl+TvuiRW1m3n0eDl0vRPcEysqdXn+jsQPsrHMquGeXEaY4Yk4wxWcY5V/9scqOMOVUFthatyTy8QyqwZ+kDURKoMWxNKr2EeqVKcTNOajqKoBgOE28U4tdQl5p5bwCw7BWquaZSzAPlwjlithJtp3pTImSqQRrb2Z8PHGigD4RZuNX6JYj6wj7O4TFLbCO/Mn/m8R+h6rYSUb3ekokRY6f/YukArN979jcW+V/S8g0eT/N3VN3kTqWbQ428m9/8k0P/1aIhF36PccEl6EhOcAUCrXKZXXWS3XKd2vc/TRBG9O5ELC17MmWubD2nKhUKZa26Ba2+D3P+4/MNCFwg59oWVeYhkzgN/JDR8deKBoD7Y+ljEjGZ0sosXVTvbc6RHirr2reNy1OXd6pJsQ+gqjk8VWFYmHrwBzW/n+uMPFiRwHB2I7ih8ciHFxIkd/3Omk5tCDV1t+2nNu5sxxpDFNx+huNhVT3/zMDz8usXC3ddaHBj1GHj/As08fwTS7Kt1HBTmyN29vdwAw+/wbwLVOJ3uAD1wi/dUH7Qei66PfyuRj4Ik9is+hglfbkbfR3cnZm7chlUWLdwmprtCohX4HUtlOcQjLYCu+fzGJH2QRKvP3UNz8bWk1qMxjGTOMThZ3kvgLI5AzFfo379UAAAAASUVORK5CYII=",width:100},{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVEiJtZZPbBtFFMZ/M7ubXdtdb1xSFyeilBapySVU8h8OoFaooFSqiihIVIpQBKci6KEg9Q6H9kovIHoCIVQJJCKE1ENFjnAgcaSGC6rEnxBwA04Tx43t2FnvDAfjkNibxgHxnWb2e/u992bee7tCa00YFsffekFY+nUzFtjW0LrvjRXrCDIAaPLlW0nHL0SsZtVoaF98mLrx3pdhOqLtYPHChahZcYYO7KvPFxvRl5XPp1sN3adWiD1ZAqD6XYK1b/dvE5IWryTt2udLFedwc1+9kLp+vbbpoDh+6TklxBeAi9TL0taeWpdmZzQDry0AcO+jQ12RyohqqoYoo8RDwJrU+qXkjWtfi8Xxt58BdQuwQs9qC/afLwCw8tnQbqYAPsgxE1S6F3EAIXux2oQFKm0ihMsOF71dHYx+f3NND68ghCu1YIoePPQN1pGRABkJ6Bus96CutRZMydTl+TvuiRW1m3n0eDl0vRPcEysqdXn+jsQPsrHMquGeXEaY4Yk4wxWcY5V/9scqOMOVUFthatyTy8QyqwZ+kDURKoMWxNKr2EeqVKcTNOajqKoBgOE28U4tdQl5p5bwCw7BWquaZSzAPlwjlithJtp3pTImSqQRrb2Z8PHGigD4RZuNX6JYj6wj7O4TFLbCO/Mn/m8R+h6rYSUb3ekokRY6f/YukArN979jcW+V/S8g0eT/N3VN3kTqWbQ428m9/8k0P/1aIhF36PccEl6EhOcAUCrXKZXXWS3XKd2vc/TRBG9O5ELC17MmWubD2nKhUKZa26Ba2+D3P+4/MNCFwg59oWVeYhkzgN/JDR8deKBoD7Y+ljEjGZ0sosXVTvbc6RHirr2reNy1OXd6pJsQ+gqjk8VWFYmHrwBzW/n+uMPFiRwHB2I7ih8ciHFxIkd/3Omk5tCDV1t+2nNu5sxxpDFNx+huNhVT3/zMDz8usXC3ddaHBj1GHj/As08fwTS7Kt1HBTmyN29vdwAw+/wbwLVOJ3uAD1wi/dUH7Qei66PfyuRj4Ik9is+hglfbkbfR3cnZm7chlUWLdwmprtCohX4HUtlOcQjLYCu+fzGJH2QRKvP3UNz8bWk1qMxjGTOMThZ3kvgLI5AzFfo379UAAAAASUVORK5CYII=",width:100},{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVEiJtZZPbBtFFMZ/M7ubXdtdb1xSFyeilBapySVU8h8OoFaooFSqiihIVIpQBKci6KEg9Q6H9kovIHoCIVQJJCKE1ENFjnAgcaSGC6rEnxBwA04Tx43t2FnvDAfjkNibxgHxnWb2e/u992bee7tCa00YFsffekFY+nUzFtjW0LrvjRXrCDIAaPLlW0nHL0SsZtVoaF98mLrx3pdhOqLtYPHChahZcYYO7KvPFxvRl5XPp1sN3adWiD1ZAqD6XYK1b/dvE5IWryTt2udLFedwc1+9kLp+vbbpoDh+6TklxBeAi9TL0taeWpdmZzQDry0AcO+jQ12RyohqqoYoo8RDwJrU+qXkjWtfi8Xxt58BdQuwQs9qC/afLwCw8tnQbqYAPsgxE1S6F3EAIXux2oQFKm0ihMsOF71dHYx+f3NND68ghCu1YIoePPQN1pGRABkJ6Bus96CutRZMydTl+TvuiRW1m3n0eDl0vRPcEysqdXn+jsQPsrHMquGeXEaY4Yk4wxWcY5V/9scqOMOVUFthatyTy8QyqwZ+kDURKoMWxNKr2EeqVKcTNOajqKoBgOE28U4tdQl5p5bwCw7BWquaZSzAPlwjlithJtp3pTImSqQRrb2Z8PHGigD4RZuNX6JYj6wj7O4TFLbCO/Mn/m8R+h6rYSUb3ekokRY6f/YukArN979jcW+V/S8g0eT/N3VN3kTqWbQ428m9/8k0P/1aIhF36PccEl6EhOcAUCrXKZXXWS3XKd2vc/TRBG9O5ELC17MmWubD2nKhUKZa26Ba2+D3P+4/MNCFwg59oWVeYhkzgN/JDR8deKBoD7Y+ljEjGZ0sosXVTvbc6RHirr2reNy1OXd6pJsQ+gqjk8VWFYmHrwBzW/n+uMPFiRwHB2I7ih8ciHFxIkd/3Omk5tCDV1t+2nNu5sxxpDFNx+huNhVT3/zMDz8usXC3ddaHBj1GHj/As08fwTS7Kt1HBTmyN29vdwAw+/wbwLVOJ3uAD1wi/dUH7Qei66PfyuRj4Ik9is+hglfbkbfR3cnZm7chlUWLdwmprtCohX4HUtlOcQjLYCu+fzGJH2QRKvP3UNz8bWk1qMxjGTOMThZ3kvgLI5AzFfo379UAAAAASUVORK5CYII=",width:100},{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVEiJtZZPbBtFFMZ/M7ubXdtdb1xSFyeilBapySVU8h8OoFaooFSqiihIVIpQBKci6KEg9Q6H9kovIHoCIVQJJCKE1ENFjnAgcaSGC6rEnxBwA04Tx43t2FnvDAfjkNibxgHxnWb2e/u992bee7tCa00YFsffekFY+nUzFtjW0LrvjRXrCDIAaPLlW0nHL0SsZtVoaF98mLrx3pdhOqLtYPHChahZcYYO7KvPFxvRl5XPp1sN3adWiD1ZAqD6XYK1b/dvE5IWryTt2udLFedwc1+9kLp+vbbpoDh+6TklxBeAi9TL0taeWpdmZzQDry0AcO+jQ12RyohqqoYoo8RDwJrU+qXkjWtfi8Xxt58BdQuwQs9qC/afLwCw8tnQbqYAPsgxE1S6F3EAIXux2oQFKm0ihMsOF71dHYx+f3NND68ghCu1YIoePPQN1pGRABkJ6Bus96CutRZMydTl+TvuiRW1m3n0eDl0vRPcEysqdXn+jsQPsrHMquGeXEaY4Yk4wxWcY5V/9scqOMOVUFthatyTy8QyqwZ+kDURKoMWxNKr2EeqVKcTNOajqKoBgOE28U4tdQl5p5bwCw7BWquaZSzAPlwjlithJtp3pTImSqQRrb2Z8PHGigD4RZuNX6JYj6wj7O4TFLbCO/Mn/m8R+h6rYSUb3ekokRY6f/YukArN979jcW+V/S8g0eT/N3VN3kTqWbQ428m9/8k0P/1aIhF36PccEl6EhOcAUCrXKZXXWS3XKd2vc/TRBG9O5ELC17MmWubD2nKhUKZa26Ba2+D3P+4/MNCFwg59oWVeYhkzgN/JDR8deKBoD7Y+ljEjGZ0sosXVTvbc6RHirr2reNy1OXd6pJsQ+gqjk8VWFYmHrwBzW/n+uMPFiRwHB2I7ih8ciHFxIkd/3Omk5tCDV1t+2nNu5sxxpDFNx+huNhVT3/zMDz8usXC3ddaHBj1GHj/As08fwTS7Kt1HBTmyN29vdwAw+/wbwLVOJ3uAD1wi/dUH7Qei66PfyuRj4Ik9is+hglfbkbfR3cnZm7chlUWLdwmprtCohX4HUtlOcQjLYCu+fzGJH2QRKvP3UNz8bWk1qMxjGTOMThZ3kvgLI5AzFfo379UAAAAASUVORK5CYII=",width:100}]},{columns:[{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVEiJtZZPbBtFFMZ/M7ubXdtdb1xSFyeilBapySVU8h8OoFaooFSqiihIVIpQBKci6KEg9Q6H9kovIHoCIVQJJCKE1ENFjnAgcaSGC6rEnxBwA04Tx43t2FnvDAfjkNibxgHxnWb2e/u992bee7tCa00YFsffekFY+nUzFtjW0LrvjRXrCDIAaPLlW0nHL0SsZtVoaF98mLrx3pdhOqLtYPHChahZcYYO7KvPFxvRl5XPp1sN3adWiD1ZAqD6XYK1b/dvE5IWryTt2udLFedwc1+9kLp+vbbpoDh+6TklxBeAi9TL0taeWpdmZzQDry0AcO+jQ12RyohqqoYoo8RDwJrU+qXkjWtfi8Xxt58BdQuwQs9qC/afLwCw8tnQbqYAPsgxE1S6F3EAIXux2oQFKm0ihMsOF71dHYx+f3NND68ghCu1YIoePPQN1pGRABkJ6Bus96CutRZMydTl+TvuiRW1m3n0eDl0vRPcEysqdXn+jsQPsrHMquGeXEaY4Yk4wxWcY5V/9scqOMOVUFthatyTy8QyqwZ+kDURKoMWxNKr2EeqVKcTNOajqKoBgOE28U4tdQl5p5bwCw7BWquaZSzAPlwjlithJtp3pTImSqQRrb2Z8PHGigD4RZuNX6JYj6wj7O4TFLbCO/Mn/m8R+h6rYSUb3ekokRY6f/YukArN979jcW+V/S8g0eT/N3VN3kTqWbQ428m9/8k0P/1aIhF36PccEl6EhOcAUCrXKZXXWS3XKd2vc/TRBG9O5ELC17MmWubD2nKhUKZa26Ba2+D3P+4/MNCFwg59oWVeYhkzgN/JDR8deKBoD7Y+ljEjGZ0sosXVTvbc6RHirr2reNy1OXd6pJsQ+gqjk8VWFYmHrwBzW/n+uMPFiRwHB2I7ih8ciHFxIkd/3Omk5tCDV1t+2nNu5sxxpDFNx+huNhVT3/zMDz8usXC3ddaHBj1GHj/As08fwTS7Kt1HBTmyN29vdwAw+/wbwLVOJ3uAD1wi/dUH7Qei66PfyuRj4Ik9is+hglfbkbfR3cnZm7chlUWLdwmprtCohX4HUtlOcQjLYCu+fzGJH2QRKvP3UNz8bWk1qMxjGTOMThZ3kvgLI5AzFfo379UAAAAASUVORK5CYII=",width:100},{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVEiJtZZPbBtFFMZ/M7ubXdtdb1xSFyeilBapySVU8h8OoFaooFSqiihIVIpQBKci6KEg9Q6H9kovIHoCIVQJJCKE1ENFjnAgcaSGC6rEnxBwA04Tx43t2FnvDAfjkNibxgHxnWb2e/u992bee7tCa00YFsffekFY+nUzFtjW0LrvjRXrCDIAaPLlW0nHL0SsZtVoaF98mLrx3pdhOqLtYPHChahZcYYO7KvPFxvRl5XPp1sN3adWiD1ZAqD6XYK1b/dvE5IWryTt2udLFedwc1+9kLp+vbbpoDh+6TklxBeAi9TL0taeWpdmZzQDry0AcO+jQ12RyohqqoYoo8RDwJrU+qXkjWtfi8Xxt58BdQuwQs9qC/afLwCw8tnQbqYAPsgxE1S6F3EAIXux2oQFKm0ihMsOF71dHYx+f3NND68ghCu1YIoePPQN1pGRABkJ6Bus96CutRZMydTl+TvuiRW1m3n0eDl0vRPcEysqdXn+jsQPsrHMquGeXEaY4Yk4wxWcY5V/9scqOMOVUFthatyTy8QyqwZ+kDURKoMWxNKr2EeqVKcTNOajqKoBgOE28U4tdQl5p5bwCw7BWquaZSzAPlwjlithJtp3pTImSqQRrb2Z8PHGigD4RZuNX6JYj6wj7O4TFLbCO/Mn/m8R+h6rYSUb3ekokRY6f/YukArN979jcW+V/S8g0eT/N3VN3kTqWbQ428m9/8k0P/1aIhF36PccEl6EhOcAUCrXKZXXWS3XKd2vc/TRBG9O5ELC17MmWubD2nKhUKZa26Ba2+D3P+4/MNCFwg59oWVeYhkzgN/JDR8deKBoD7Y+ljEjGZ0sosXVTvbc6RHirr2reNy1OXd6pJsQ+gqjk8VWFYmHrwBzW/n+uMPFiRwHB2I7ih8ciHFxIkd/3Omk5tCDV1t+2nNu5sxxpDFNx+huNhVT3/zMDz8usXC3ddaHBj1GHj/As08fwTS7Kt1HBTmyN29vdwAw+/wbwLVOJ3uAD1wi/dUH7Qei66PfyuRj4Ik9is+hglfbkbfR3cnZm7chlUWLdwmprtCohX4HUtlOcQjLYCu+fzGJH2QRKvP3UNz8bWk1qMxjGTOMThZ3kvgLI5AzFfo379UAAAAASUVORK5CYII=",width:100},{image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAApgAAAKYB3X3/OAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANCSURBVEiJtZZPbBtFFMZ/M7ubXdtdb1xSFyeilBapySVU8h8OoFaooFSqiihIVIpQBKci6KEg9Q6H9kovIHoCIVQJJCKE1ENFjnAgcaSGC6rEnxBwA04Tx43t2FnvDAfjkNibxgHxnWb2e/u992bee7tCa00YFsffekFY+nUzFtjW0LrvjRXrCDIAaPLlW0nHL0SsZtVoaF98mLrx3pdhOqLtYPHChahZcYYO7KvPFxvRl5XPp1sN3adWiD1ZAqD6XYK1b/dvE5IWryTt2udLFedwc1+9kLp+vbbpoDh+6TklxBeAi9TL0taeWpdmZzQDry0AcO+jQ12RyohqqoYoo8RDwJrU+qXkjWtfi8Xxt58BdQuwQs9qC/afLwCw8tnQbqYAPsgxE1S6F3EAIXux2oQFKm0ihMsOF71dHYx+f3NND68ghCu1YIoePPQN1pGRABkJ6Bus96CutRZMydTl+TvuiRW1m3n0eDl0vRPcEysqdXn+jsQPsrHMquGeXEaY4Yk4wxWcY5V/9scqOMOVUFthatyTy8QyqwZ+kDURKoMWxNKr2EeqVKcTNOajqKoBgOE28U4tdQl5p5bwCw7BWquaZSzAPlwjlithJtp3pTImSqQRrb2Z8PHGigD4RZuNX6JYj6wj7O4TFLbCO/Mn/m8R+h6rYSUb3ekokRY6f/YukArN979jcW+V/S8g0eT/N3VN3kTqWbQ428m9/8k0P/1aIhF36PccEl6EhOcAUCrXKZXXWS3XKd2vc/TRBG9O5ELC17MmWubD2nKhUKZa26Ba2+D3P+4/MNCFwg59oWVeYhkzgN/JDR8deKBoD7Y+ljEjGZ0sosXVTvbc6RHirr2reNy1OXd6pJsQ+gqjk8VWFYmHrwBzW/n+uMPFiRwHB2I7ih8ciHFxIkd/3Omk5tCDV1t+2nNu5sxxpDFNx+huNhVT3/zMDz8usXC3ddaHBj1GHj/As08fwTS7Kt1HBTmyN29vdwAw+/wbwLVOJ3uAD1wi/dUH7Qei66PfyuRj4Ik9is+hglfbkbfR3cnZm7chlUWLdwmprtCohX4HUtlOcQjLYCu+fzGJH2QRKvP3UNz8bWk1qMxjGTOMThZ3kvgLI5AzFfo379UAAAAASUVORK5CYII=",width:100}]},{table:{body:[["Column 1","Column 2","Column 3"],["Row 1, Cell 1","Row 1, Cell 2","Row 1, Cell 3"],["Row 2, Cell 1","Row 2, Cell 2","Row 2, Cell 3"],["Row 2, Cell 1","Row 2, Cell 2","Row 2, Cell 3"],["Row 2, Cell 1","Row 2, Cell 2","Row 2, Cell 3"],["Row 2, Cell 1","Row 2, Cell 2","Row 2, Cell 3"],["Row 2, Cell 1","Row 2, Cell 2","Row 2, Cell 3"],["Row 2, Cell 1","Row 2, Cell 2","Row 2, Cell 3"],["Row 2, Cell 1","Row 2, Cell 2","Row 2, Cell 3"],["Row 2, Cell 1","Row 2, Cell 2","Row 2, Cell 3"],["Row 2, Cell 1","Row 2, Cell 2","Row 2, Cell 3"],["Row 2, Cell 1","Row 2, Cell 2","Row 2, Cell 3"],["Row 2, Cell 1","Row 2, Cell 2","Row 2, Cell 3"]]}},{text:"Hello, World!",style:"header"},{text:"This is a paragraph",style:"paragraph"},{text:"Table:",style:"subheader"},{style:"table",table:{headerRows:1,widths:["auto","*","auto","auto","auto"],body:[["N\xB0","Designation","Quantity","Unique Price","Total"],["1","Product A","5","$10","$50"],["2","Product B","3","$15","$45"],["3","Product C","2","$20","$40"]]}},{text:"Hello, World!",style:"header"},{text:"This is a paragraph",style:"paragraph"},{text:"Table:",style:"subheader"},{style:"table",table:{headerRows:1,widths:["auto","*","auto","auto","auto"],body:[["N\xB0","Designation","Quantity","Unique Price","Total"],["1","Product A","5","$10","$50"],["2","Product B","3","$15","$45"],["3","Product C","2","$20","$40"]]}},{text:"Hello, World!",style:"header"},{text:"This is a paragraph",style:"paragraph"},{text:"Table:",style:"subheader"},{style:"table",table:{headerRows:1,widths:["auto","*","auto","auto","auto"],body:[[{text:"N\xB0",style:"tableHeader"},{text:"Designation",style:"tableHeader"},{text:"Quantity",style:"tableHeader"},{text:"Unique Price",style:"tableHeader"},{text:"Total",style:"tableHeader"}],["1","Product A","5","$10","$50"],["2","Product B","3","$15","$45"],["3","Product C","2","$20","$40"]]}}]}getImageData(t){return P(this,null,function*(){return""})}};s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=F({type:s,selectors:[["app-pdf-generator"]],decls:4,vars:0,consts:[[3,"click"]],template:function(e,i){e&1&&(o(0,"button",0),f("click",function(){return i.OpenPdfFile()}),l(1,"Open PDF"),r(),o(2,"button",0),f("click",function(){return i.downloadPdf()}),l(3,"downloadPdf PDF"),r())}});let a=s;return a})();function ye(a,s){if(a&1){let n=E();o(0,"tbody")(1,"tr")(2,"td"),l(3),r(),o(4,"td"),l(5),r(),o(6,"td"),l(7),r(),o(8,"td")(9,"i",40),f("click",function(){let e=v(n).$implicit,i=h();return x(i.EditApi(e))}),r()(),o(10,"td")(11,"i",41),f("click",function(){let e=v(n).$implicit,i=h();return x(i.ApiSelected(e))}),r()()()()}if(a&2){let n=s.$implicit;d(3),b(n.id),d(2),b(n.token),d(2),b(n.isActive?"OK":"NO ACCESS")}}function Se(a,s){if(a&1&&(o(0,"p",37)(1,"strong"),l(2),r()()),a&2){let n=h();d(2),b(n.message)}}function Ee(a,s){a&1&&(o(0,"h1"),l(1,"Token"),r())}var Qt=(()=>{let s=class s{constructor(t,e){this.auth=t,this.api=e,this.apis$=[],this.isLoading=!1,this.LoadingMsg="Loading...",this.isEditMode=!1,this.message="",this.tokenLenght=0,this.defaultTokenLenght=30}ngOnInit(){this.GetApis(),this.apiForm=this.createFormGroup()}generateTokenLenght(t){let e=t.target;e&&(this.tokenLenght=(e.value??"").length)}GetApis(){this.api.ApiTokenAccessAction({action:"list"}).subscribe(t=>P(this,null,function*(){t.status==200&&(this.apis$=t.data)}),t=>{})}EditApi(t){this.isEditMode=!0,this.apiForm=this.createFormGroup(t),this.ApiSelected(t)}ApiSelected(t){this.selectedApi=t,this.message=""}DeleteApi(){this.isEditMode=!1,this.selectedApi&&this.api.ApiTokenAccessAction({action:"list",id:this.selectedApi.id}).subscribe(t=>{t.status===200?(this.showModalToast("success","Supprim\xE9 avec success"),this.GetApis(),this.selectedApi=null,this.isLoading=!1,this.message=""):this.message=t.data,console.log(this.message)},t=>{this.message=t,this.isLoading=!1,console.log(this.message)})}CreateApi(){this.isEditMode=!1,this.apiForm=this.createFormGroup(),this.selectedApi=null,this.message=""}createFormGroup(t){let e={token:new S(t!=null?t.token:"",[y.required,y.minLength(this.defaultTokenLenght),y.maxLength(this.defaultTokenLenght)]),isActive:new S(t!=null?t.isActive:!1)};return new V(e)}showModalToast(t,e){showToast(t,e),this.closeModal("close-delete-modal")}closeModal(t="close-modal"){$("#"+t).trigger("click")}CreateOrUpdateApi(){var t;if(this.isEditMode?this.selectedApi&&(t=this.api.ApiTokenAccessAction({action:"update",id:this.selectedApi.id,token:this.apiForm.value.token,isActive:this.apiForm.value.isActive})):t=this.api.ApiTokenAccessAction({action:"create",token:this.apiForm.value.token,isActive:this.apiForm.value.isActive}),t)return t.subscribe(e=>{e.status===200?(this.message="Registed successfully !",this.closeModal(),this.GetApis(),this.selectedApi=null,this.message=""):this.message=e.data,console.log(this.message),this.isLoading=!1},e=>{this.isLoading=!1})}};s.\u0275fac=function(e){return new(e||s)(k(mt),k(H))},s.\u0275cmp=F({type:s,selectors:[["user-api"]],decls:76,vars:17,consts:[[1,"page-title","card","card-primary","card-outline"],[1,"card-body"],[1,"fas","fa-user",2,"float","left"],["type","button","data-toggle","modal","data-target","#modal-default",1,"btn","btn-default",2,"float","right",3,"click"],[1,"page-content-wrap"],[1,"row"],[1,"col-md-12"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"panel-body"],[1,"table","datatable"],["colspan","2"],[4,"ngFor","ngForOf"],["id","modal-default",1,"modal","fade"],[1,"modal-dialog"],["novalidate","",1,"form-horizontal",3,"ngSubmit","formGroup"],[1,"modal-content"],[1,"modal-header"],[1,"login-box-msg",2,"text-align","center"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],["class","login-box-msg",4,"ngIf"],[4,"ngIf"],[1,"input-group","mb-3"],["id","api-token","id","token","type","text","placeholder","Token","formControlName","token",1,"form-control",3,"input","maxlength"],[1,"col-6"],[1,"icheck-primary"],["type","checkbox","id","isActive","formControlName","isActive"],["for","isActive"],[1,"modal-footer","justify-content-between"],["id","close-modal","type","button","data-dismiss","modal",1,"btn","btn-default"],["type","submit",3,"disabled"],["id","modal-danger",1,"modal","fade"],[1,"modal-content","bg-danger"],[1,"modal-title"],["id","close-delete-modal","type","button","data-dismiss","modal","aria-label","Close",1,"close"],[1,"login-box-msg"],["type","button","data-dismiss","modal",1,"btn","btn-default"],["type","button",1,"btn","btn-danger","swalDefaultSuccess",3,"click"],["data-toggle","modal","data-target","#modal-default",1,"btn-warning","fas","fa-edit",3,"click"],["data-toggle","modal","data-target","#modal-danger",1,"btn-danger","fas","fa-trash-alt",3,"click"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),l(3," API List"),r(),o(4,"button",3),f("click",function(){return i.CreateApi()}),l(5," Add API "),r()()(),o(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),_(10,"div",8),o(11,"div",9)(12,"table",10)(13,"thead")(14,"tr")(15,"th"),l(16,"id"),r(),o(17,"th"),l(18,"Token"),r(),o(19,"th"),l(20,"IsActive"),r(),o(21,"th",11),l(22,"Actions"),r()()(),C(23,ye,12,3,"tbody",12),r()()()()()(),o(24,"div",13)(25,"div",14)(26,"form",15),f("ngSubmit",function(){return i.CreateOrUpdateApi()}),o(27,"div",16)(28,"div",17)(29,"strong",18)(30,"span"),l(31),r()(),o(32,"button",19)(33,"span",20),l(34,"\xD7"),r()()(),o(35,"div",21),C(36,Se,3,1,"p",22)(37,Ee,2,0,"h1",23),o(38,"div",24)(39,"input",25),f("input",function(m){return i.generateTokenLenght(m)}),r()(),o(40,"p"),l(41),o(42,"strong"),l(43),r()(),_(44,"br"),o(45,"div",5)(46,"div",26)(47,"div",24)(48,"div",27),_(49,"input",28),o(50,"label",29),l(51,"Activer"),r()()()()()(),o(52,"div",30)(53,"button",31),l(54,"Close"),r(),o(55,"button",32),l(56),r()()()()()(),o(57,"div",33)(58,"div",14)(59,"div",34)(60,"div",17)(61,"h4",35),l(62,"Suppression d'utilisateur"),r(),o(63,"button",36)(64,"span",20),l(65,"\xD7"),r()()(),o(66,"div",21),l(67," Cette action est ir\xE9versible! \xCAtes vous s\xFBr de proc\xE9der \xE0 la suppression ? "),o(68,"p",37)(69,"strong"),l(70),r()()(),o(71,"div",30)(72,"button",38),l(73,"Annuler"),r(),o(74,"button",39),f("click",function(){return i.DeleteApi()}),l(75,"Oui Supprimer !"),r()()()()()),e&2&&(d(23),u("ngForOf",i.apis$),d(3),u("formGroup",i.apiForm),d(4),L(" btn-",i.isEditMode?"warning":"success",""),d(),R(" ",i.isEditMode?"Modifier un utilisateur":"Ajouter un utilisateur",""),d(5),u("ngIf",i.message!=""),d(),u("ngIf",i.isEditMode),d(2),u("maxlength",i.defaultTokenLenght),d(2),R("",i.tokenLenght," / "),d(2),b(i.defaultTokenLenght),d(12),L("btn btn-",i.isEditMode?"warning":"success",""),u("disabled",!i.apiForm.valid),d(),R("",i.isEditMode?"Modifier":"Sauvegarder"," "),d(14),b(i.message))},dependencies:[G,U,Y,K,lt,j,Q,Et,z,q],encapsulation:2});let a=s;return a})();var Yt=(()=>{let s=class s{constructor(){}ngOnInit(){}};s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=F({type:s,selectors:[["ng-component"]],decls:22,vars:0,consts:[[1,"bg-white","rounded","h-100","p-4"],[1,"mb-4",2,"color","darkblue"],[1,"d-flex","align-items-start"],["id","v-pills-tab","role","tablist","aria-orientation","vertical",1,"nav","flex-column","nav-pills","me-3"],["id","v-pills-home-tab","data-bs-toggle","pill","data-bs-target","#v-pills-home","type","button","role","tab","aria-controls","v-pills-home","aria-selected","true",1,"nav-link","active"],["id","v-pills-profile-tab","data-bs-toggle","pill","data-bs-target","#v-pills-profile","type","button","role","tab","aria-controls","v-pills-profile","aria-selected","false",1,"nav-link"],["id","v-pills-messages-tab","data-bs-toggle","pill","data-bs-target","#v-pills-messages","type","button","role","tab","aria-controls","v-pills-messages","aria-selected","false",1,"nav-link"],["id","v-pills-settings-tab","data-bs-toggle","pill","data-bs-target","#v-pills-settings","type","button","role","tab","aria-controls","v-pills-settings","aria-selected","false",1,"nav-link"],["id","v-pills-tabContent",1,"tab-content"],["id","v-pills-home","role","tabpanel","aria-labelledby","v-pills-home-tab",1,"tab-pane","fade","show","active"],["id","v-pills-profile","role","tabpanel","aria-labelledby","v-pills-profile-tab",1,"tab-pane","fade"],["id","v-pills-messages","role","tabpanel","aria-labelledby","v-pills-messages-tab",1,"tab-pane","fade"],["id","v-pills-settings","role","tabpanel","aria-labelledby","v-pills-settings-tab",1,"tab-pane","fade"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"h6",1),l(2,"Documentation"),r(),o(3,"div",2)(4,"div",3)(5,"button",4),l(6,"Home"),r(),o(7,"button",5),l(8,"Profile"),r(),o(9,"button",6),l(10,"Messages"),r(),o(11,"button",7),l(12,"Settings"),r()(),o(13,"div",8)(14,"div",9),l(15," Consetetur at sit est sit ut ipsum clita at. Sit elitr sit sea dolor tempor eos sit, erat diam ea rebum clita no ea. Et amet sed nonumy sadipscing dolor et ut sed et. Stet eirmod est nonumy clita invidunt rebum. Nonumy dolor ut diam invidunt eirmod nonumy sed gubergren,. "),r(),o(16,"div",10),l(17," Tempor et kasd accusam duo et dolor no accusam dolore, dolor sed voluptua duo no, sit et stet lorem dolor ipsum tempor consetetur vero, consetetur est eos sit eirmod erat diam accusam sadipscing sit. Takimata erat ea eirmod tempor elitr dolore sadipscing kasd justo, elitr tempor sed eos sadipscing magna. "),r(),o(18,"div",11),l(19," Sed kasd kasd ea clita sed lorem amet tempor est voluptua, labore stet dolores gubergren clita lorem sed nonumy at. Dolores et ut erat voluptua. Est voluptua stet accusam rebum, elitr amet sit takimata sea eirmod. Sanctus elitr amet sit dolore sea stet et ut. Dolor et sanctus elitr ut. "),r(),o(20,"div",12),l(21," Sit et vero kasd sea et at, aliquyam takimata et et est, labore et takimata sed ut stet sanctus, nonumy dolor invidunt sit labore et, amet et dolor sit dolor tempor et dolor ipsum nonumy, accusam clita sadipscing ut et labore labore est, dolore accusam vero at est sit. Invidunt. "),r()()()())},encapsulation:2});let a=s;return a})();function ke(a,s){if(a&1&&(o(0,"div",17),_(1,"i",18),o(2,"div",19),l(3),r()()),a&2){let n=h();d(3),R(" ",n.initMsg,"")}}function Re(a,s){if(a&1&&(o(0,"option",20),l(1),r()),a&2){let n=s.$implicit;B("value",n.name),d(),R(" ",n.table.toLocaleUpperCase().replaceAll("_"," ")," ")}}function Fe(a,s){if(a&1&&(o(0,"option",20),l(1),r()),a&2){let n=s.$implicit;B("value",n),d(),R(" ",n," ")}}var zt=(()=>{let s=class s{constructor(t){this.api=t,this.responseMsg="",this.constMsg="Loading...",this.initMsg=this.constMsg,this.EntitiesList$=[],this.initEntity=[],this.Actions$=["TRUNCATE","DROP"]}createEntitiesFilterFormGroup(){return new V({entities:new S([],[y.required]),action:new S("TRUNCATE",[y.required])})}ngOnInit(){this.EntitiesForm=this.createEntitiesFilterFormGroup(),this.initAllData()}initAllData(){return P(this,null,function*(){this.isLoading=!0,this.initMsg="Chargement des Entities ...",this.api.getDatabaseEntities().subscribe(t=>P(this,null,function*(){t.status==200&&(this.EntitiesList$=t.data)}),t=>{this.isLoading=!1,console.log(t.error)})})}EntitiesSelectedList(){var t=[];let e=Tt(this.EntitiesForm.value.entities);this.initEntity=e;for(let i=0;i<this.EntitiesList$.length;i++){let c=this.EntitiesList$[i];e.includes(c.name)&&t.push(c)}return t}TruncateBd(){let t=this.EntitiesSelectedList();t.length>0&&(this.responseMsg="",this.initMsg=this.constMsg,this.isEntityLoading=!0,this.api.truncateDatabase({procide:!0,entities:t,action:this.EntitiesForm.value.action}).subscribe(e=>P(this,null,function*(){this.responseMsg=e.data.toString(),e.status==200&&(this.initEntity=[]),this.isEntityLoading=!1}),e=>{console.log(e.error),this.isEntityLoading=!1,this.responseMsg=e.toString()}))}};s.\u0275fac=function(e){return new(e||s)(k(H))},s.\u0275cmp=F({type:s,selectors:[["app-user"]],decls:32,vars:7,consts:[[2,"color","red"],[1,"content-header"],[1,"container-fluid"],[1,"card","card-info"],[1,"overlay-wrapper"],["class","overlay",4,"ngIf"],[1,"card-header"],["novalidate","",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-sm-4","col-6"],[1,"form-group"],["formControlName","entities","multiple","multiple",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","action",1,"form-control"],["type","submit",1,"btn","btn-danger","form-control",3,"disabled"],[1,"fa","fa-floppy-o","fa-right"],[1,"overlay"],[1,"fas","fa-3x","fa-sync-alt","fa-spin"],[1,"text-bold","pt-2"],[3,"value"]],template:function(e,i){e&1&&(o(0,"h1",0),l(1),r(),o(2,"section",1)(3,"div",2)(4,"h2"),l(5,"Truncate Database"),r(),o(6,"div",3)(7,"div",4),C(8,ke,4,1,"div",5),o(9,"div",6)(10,"form",7),f("ngSubmit",function(){return i.TruncateBd()}),o(11,"div",8)(12,"div",9)(13,"div",10)(14,"label"),l(15,"Entities"),r(),o(16,"select",11),_(17,"option",12),C(18,Re,2,2,"option",13),r()()(),o(19,"div",9)(20,"div",10)(21,"label"),l(22,"Action"),r(),o(23,"select",14),C(24,Fe,2,2,"option",13),r()()(),o(25,"div",9)(26,"div",10)(27,"label"),l(28,"."),r(),o(29,"button",15),l(30),_(31,"span",16),r()()()()()()()()()()),e&2&&(d(),R(" ",i.responseMsg," "),d(7),u("ngIf",i.isEntityLoading),d(2),u("formGroup",i.EntitiesForm),d(8),u("ngForOf",i.EntitiesList$),d(6),u("ngForOf",i.Actions$),d(5),u("disabled",!i.EntitiesForm.valid&&i.initEntity.length<=0),d(),R(" ",i.EntitiesForm.value.action!=""?i.EntitiesForm.value.action:"TRUNCATE"," POSTGRES DATABASE "))},dependencies:[G,U,Y,ct,pt,dt,St,j,Q,z,q],encapsulation:2});let a=s;return a})();var Te=[{path:"",redirectTo:"users",pathMatch:"full"},{path:"users",component:It,canActivate:[I],data:{href:"admin/users",title:"Users"}},{path:"documentations",component:Yt,canActivate:[],data:{href:"admin/documentations",title:"Documentation"}},{path:"delete-couchdb-data",component:Vt,canActivate:[I],data:{href:"admin/delete-couchdb-data",title:"DeleteCouchdbData"}},{path:"truncate-database",component:zt,canActivate:[I],data:{href:"admin/truncate-database",title:"TruncateDatabase"}},{path:"roles",component:Wt,canActivate:[I],data:{href:"admin/roles",title:"Roles"}},{path:"databases",component:Bt,canActivate:[I],data:{href:"admin/databases",title:"Databases"}},{path:"api-access",component:Qt,canActivate:[I],data:{href:"admin/api-access",title:"Apis"}},{path:"signature",component:Gt,canActivate:[I],data:{href:"admin/signature",title:"Signature"}},{path:"pdf-generator",component:jt,canActivate:[I],data:{href:"admin/pdf-generator",title:"Pdf Generator"}}],qt=(()=>{let s=class s{};s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=rt({type:s}),s.\u0275inj=ot({imports:[ft.forChild(Te),ft]});let a=s;return a})();var Mi=(()=>{let s=class s{};s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=rt({type:s}),s.\u0275inj=ot({imports:[wt,Rt,qt,kt,Ft,yt]});let a=s;return a})();export{Mi as AdminModule};
